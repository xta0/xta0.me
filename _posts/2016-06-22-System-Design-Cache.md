---
updated: "2018-10-21"
layout: post
title: 缓存
list_title: 系统设计入门 | System Design | 缓存 | Cache
categories: [backend]
---

### 缓存概述

缓存典型的应用场景有：

1. 需要实时计算的数据，数据库不适合存放的数据
    例如一个SNS网页要显示当前有多少人在线，如果使用数据库存储，每次查询都需要对数据库进行`count(*)`，无论数据库性能如何优化，都不足以支撑频繁的查询。
2. 读过写少的业务场景
    绝大部分的在线业务都是读多写少，比如Facebook，Youtube，Amazon，Twitter等，读业务可能占了整体业务的90%以上，以Twitter为例，明星发一条推只执行一条`insert`语句，但这条推文可能会引来千万人的浏览，对数据库来说就是千万条的`select`，即使有索引，对数据库的压力也非常大

缓存设计的目的就是为了应对上述场景，其基本原理就是将大量重复使用的数据放到内存中，一次生成，多次使用，避免每次查询都走数据库。引入缓存可以极大的提高查询性能，缩短请求时间，从而带来更好的用户体验。以memcached为例，单台memcached服务器简单的key-value查询可支撑TPS 50000以上。

- Application Server Cache

缓存的设计方案有很多种，最简单的是单机缓存，即当请求到来时，服务器查自己的缓存，并返回数据给Client。这种方式适用于业务场景简单，没有大规模请求的应用。但是请求量上来，单台服务器会横向扩展到多台，这种缓存方式就会出现问题，虽然被扩展出来的多台服务器仍可以自己维护自己的缓存，但是同一个用户的请求可能被负载均衡投递到不同的服务器上，会大大增加缓存Miss的概率。解决这个问题，可以使用两种方式，一种是分布式缓存，一种是全局缓存。
















## Resources

- [Caching]()
- [高性能缓存架构]()