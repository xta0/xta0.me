I"º¢<h2 id="å‡½æ•°æ¨¡æ¿">å‡½æ•°æ¨¡æ¿</h2>

<p>å‡½æ•°æ¨¡æ¿å®šä¹‰ä¸º</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="err">å‚æ•°1,</span> <span class="nc">class</span> <span class="err">å‚æ•°</span><span class="mi">2</span><span class="p">,...</span><span class="o">&gt;</span>
<span class="err">è¿”å›å€¼ç±»å‹</span> <span class="err">æ¨¡æ¿å</span><span class="p">(</span><span class="err">å½¢å‚è¡¨</span><span class="p">)</span>
<span class="p">{</span>
	<span class="err">å‡½æ•°ä½“</span>
<span class="p">}</span>
</code></pre></div></div>

<p>å‡½æ•°æ¨¡æ¿å¯ä»¥é‡è½½ï¼Œåªè¦å®ƒä»¬å½¢å‚è¡¨ä¸åŒå³å¯ï¼Œä¸‹é¢ä¸¤ä¸ªæ¨¡æ¿å¯ä»¥åŒæ—¶å­˜åœ¨:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">T1</span><span class="p">,</span> <span class="k">class</span> <span class="nc">T2</span><span class="o">&gt;</span>
<span class="kt">void</span> <span class="nf">print</span><span class="p">(</span><span class="n">T1</span> <span class="n">arg1</span><span class="p">,</span> <span class="n">T2</span> <span class="n">arg2</span><span class="p">){</span>
	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">arg1</span> <span class="o">&lt;&lt;</span> <span class="s">""</span> <span class="o">&lt;&lt;</span> <span class="n">arg2</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
<span class="kt">void</span> <span class="nf">print</span><span class="p">(</span><span class="n">T</span> <span class="n">arg1</span><span class="p">,</span> <span class="n">T</span> <span class="n">arg2</span><span class="p">){</span>
	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">arg1</span> <span class="o">&lt;&lt;</span> <span class="s">""</span> <span class="o">&lt;&lt;</span><span class="n">arg2</span> <span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
<p>å½“æˆ‘ä»¬è°ƒç”¨å‡½æ•°æ¨¡æ¿æ—¶ï¼Œç¼–è¯‘å™¨ä¼šå¯¹å‡½æ•°çš„å®å‚è¿›è¡Œç±»å‹æ¨æ–­ï¼Œä»è€Œå¾—å‡ºæ¨¡æ¿å‚æ•°<code class="highlighter-rouge">T</code>çš„ç±»å‹ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºæ¨¡æ¿çš„<code class="highlighter-rouge">å®ä¾‹åŒ–(instantiate)</code>ã€‚å½“ç¼–è¯‘å™¨å®ä¾‹åŒ–ä¸€ä¸ªæ¨¡æ¿åï¼Œå¾—åˆ°çš„å‡½æ•°æ˜¯ä¸€ä¸ªæœ‰ç¡®å®šç­¾åçš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ç§°ä¸ºæ¨¡æ¿çš„<code class="highlighter-rouge">å®ä¾‹(instance)</code>ã€‚</p>

<h3 id="å‡½æ•°æ¨¡æ¿åŒ¹é…è§„åˆ™">å‡½æ•°æ¨¡æ¿åŒ¹é…è§„åˆ™</h3>

<p>C++ç¼–è¯‘å™¨å¦‚ä½•å†³å®šé€‰ç”¨é€‰ç”¨å“ªä¸ªå‡½æ•°ï¼Œéµå¾ªä»¥ä¸‹ä¼˜å…ˆé¡ºåº</p>

<ol>
  <li>å…ˆæ‰¾<strong>å‚æ•°å®Œå…¨åŒ¹é…</strong>çš„<strong>æ™®é€šå‡½æ•°</strong>ï¼ˆéç”±æ¨¡æ¿å®ä¾‹åŒ–è€Œå¾—çš„å‡½æ•°ï¼‰</li>
  <li>å†æ‰¾å‚æ•°å®Œå…¨åŒ¹é…çš„æ¨¡æ¿å‡½æ•°</li>
  <li>å†æ‰¾å®å‚ç»è¿‡è‡ªåŠ¨ç±»å‹è½¬æ¢åèƒ½å¤ŸåŒ¹é…çš„æ™®é€šå‡½æ•°</li>
  <li>ä¸Šé¢çš„éƒ½æ‰¾ä¸åˆ°ï¼Œåˆ™æŠ¥é”™</li>
</ol>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
<span class="n">T</span> <span class="nf">max</span><span class="p">(</span><span class="n">T</span> <span class="n">a</span><span class="p">,</span> <span class="n">T</span> <span class="n">b</span><span class="p">){</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">T1</span><span class="p">,</span> <span class="n">clas</span> <span class="n">T2</span><span class="o">&gt;</span>
<span class="n">T</span> <span class="nf">max</span><span class="p">(</span><span class="n">T1</span> <span class="n">a</span><span class="p">,</span> <span class="n">T2</span> <span class="n">b</span><span class="p">){</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">double</span> <span class="nf">max</span><span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span><span class="p">){</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
	<span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">j</span><span class="o">=</span><span class="mi">5</span><span class="p">;</span>
	<span class="n">max</span><span class="p">(</span><span class="mf">1.2</span><span class="p">,</span><span class="mf">3.5</span><span class="p">);</span><span class="c1">//è°ƒç”¨max(double, double)</span>
	<span class="n">max</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">);</span><span class="c1">//è°ƒç”¨ç¬¬ä¸€ä¸ªmaxå‡½æ•°</span>
	<span class="n">max</span><span class="p">(</span><span class="mf">1.3</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span><span class="c1">//è°ƒç”¨ç¬¬äºŒä¸ªmaxå‡½æ•°</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="éç±»å‹æ¨¡æ¿å‚æ•°">éç±»å‹æ¨¡æ¿å‚æ•°</h3>

<p>é™¤äº†åœ¨å‡½æ•°æ¨¡ç‰ˆä¸­å®šä¹‰æ¨¡æ¿ç±»å‹å‚æ•°å¤–ï¼Œè¿˜å¯ä»¥åœ¨æ¨¡æ¿ä¸­å®šä¹‰éç±»å‹å‚æ•°</p>

<p>å½“æ¨¡æ¿è¢«å®ä¾‹åŒ–æ—¶ï¼Œè¿™äº›å‚æ•°ä¼šè¢«è‡ªåŠ¨æ¨æ–­å‡ºæ¥ï¼Œä¾‹å¦‚ä¸‹é¢ä¾‹å­ä¸­ï¼Œ<code class="highlighter-rouge">compare</code>å‡½æ•°ç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦æ•°ç»„ï¼Œç”±äºæ•°ç»„ä¸èƒ½æ‹·è´ï¼Œå› æ­¤å‚æ•°ä¸ºä¸¤ä¸ªæ•°ç»„çš„å¼•ç”¨ï¼Œæ•°ç»„çš„é•¿åº¦ç”¨ä¸¤ä¸ªéç±»å‹å‚æ•°è¡¨ç¤º:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">tempplate</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="n">N</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">M</span><span class="o">&gt;</span>
<span class="n">compare</span><span class="p">(</span><span class="k">const</span> <span class="nf">char</span><span class="p">(</span><span class="o">&amp;</span><span class="n">p1</span><span class="p">)[</span><span class="n">N</span><span class="p">],</span> <span class="k">const</span> <span class="kt">char</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sp2</span><span class="p">)[</span><span class="n">M</span><span class="p">]){</span>
	<span class="k">return</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span><span class="n">p2</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">compare</span><span class="p">(</span><span class="s">"h1"</span><span class="p">,</span><span class="s">"h11"</span><span class="p">)</span>
</code></pre></div></div>
<p>å½“è°ƒç”¨<code class="highlighter-rouge">compare</code>æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæ¨æ–­å‡º<code class="highlighter-rouge">N</code>å’Œ<code class="highlighter-rouge">M</code>çš„å€¼æ¥å®ä¾‹åŒ–æ¨¡æ¿ï¼Œä¸Šè¿°å‡½æ•°æ¨¡æ¿ä¼šè¢«ç¼–è¯‘å™¨å®ä¾‹åŒ–ä¸º</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">compare</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="p">(</span><span class="o">&amp;</span><span class="n">p1</span><span class="p">)[</span><span class="mi">3</span><span class="p">],</span> <span class="k">const</span> <span class="kt">char</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sp2</span><span class="p">)[</span><span class="mi">4</span><span class="p">])</span> <span class="c1">//è€ƒè™‘\0</span>
</code></pre></div></div>
<p>ä½¿ç”¨éç±»å‹çš„æ¨¡æ¿å‚æ•°ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯<mark>è¿™äº›å‚æ•°åªèƒ½æ˜¯å€¼æˆ–è€…å¸¸é‡è¡¨è¾¾å¼</mark>ã€‚</p>

<h3 id="inlineä¸const">inlineä¸const</h3>

<p>å‡½æ•°æ¨¡æ¿å¯ä»¥è¢«å£°æ˜ä¸º<code class="highlighter-rouge">inline</code>çš„ï¼Œ<code class="highlighter-rouge">inline</code>è¯´æ˜ç¬¦æ”¾åˆ°æ¨¡æ¿å‚æ•°åˆ—è¡¨ä¹‹å</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="kr">inline</span> <span class="n">T</span> <span class="nf">min</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="p">,</span> <span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span><span class="p">);</span>
</code></pre></div></div>
<p>å¦ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹æ˜¯ï¼Œå¯ä»¥å°†å‡½æ•°æ¨¡æ¿çš„å‚æ•°å£°æ˜ä¸º<code class="highlighter-rouge">const</code>ç”¨æ¥æ»¡è¶³ä¸€äº›ä¸æ”¯æŒæ‹·è´çš„æ•°æ®ç±»å‹ã€‚</p>

<h3 id="æ˜¾ç¤ºå®å‚">æ˜¾ç¤ºå®å‚</h3>

<p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨æ— æ³•æ¨æ–­å‡ºæ¨¡æ¿çš„å®å‚ç±»å‹ï¼Œæ¯”å¦‚å½“å‡½æ•°çš„è¿”å›ç±»å‹äºå‚æ•°åˆ—è¡¨ä¸­ä»»ä½•ç±»å‹éƒ½ä¸åŒæ—¶ï¼Œæ­¤æ—¶éœ€è¦ç”¨æˆ·æ¥æ‰‹åŠ¨æŒ‡å®šæ¨¡æ¿å‚æ•°çš„ç±»å‹ã€‚</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T1</span><span class="p">,</span> <span class="k">typename</span> <span class="n">T2</span><span class="p">,</span> <span class="k">typename</span> <span class="n">T3</span><span class="o">&gt;</span>
<span class="n">T1</span> <span class="nf">sum</span><span class="p">(</span><span class="n">T2</span> <span class="n">x1</span><span class="p">,</span> <span class="n">T3</span> <span class="n">x2</span><span class="p">);</span>
</code></pre></div></div>
<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œç¼–è¯‘å™¨å¯ä»¥æ ¹æ®å‡º<code class="highlighter-rouge">x1</code>å’Œ<code class="highlighter-rouge">x2</code>æ¥æ¨æµ‹å‡º<code class="highlighter-rouge">T2</code>å’Œ<code class="highlighter-rouge">T3</code>çš„ç±»å‹ï¼Œä½†æ˜¯æ²¡æ³•æ¨æµ‹å‡º<code class="highlighter-rouge">T1</code>çš„ç±»å‹ï¼Œå› æ­¤éœ€è¦è°ƒç”¨è€…æ‰‹åŠ¨æŒ‡å®š</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">auto</span> <span class="n">val</span> <span class="o">=</span> <span class="n">sum</span><span class="o">&lt;</span><span class="kt">long</span> <span class="kt">long</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">lng</span><span class="p">);</span> <span class="c1">//long long sum(int, long)</span>
</code></pre></div></div>
<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å‘Šè¯‰ç¼–è¯‘å™¨<code class="highlighter-rouge">T1</code>æ˜¯<code class="highlighter-rouge">long long</code>ï¼Œè€Œ<code class="highlighter-rouge">T2</code>å’Œ<code class="highlighter-rouge">T3</code>ç¼–è¯‘å™¨å¯è‡ªè¡Œæ¨æ–­å‡ºã€‚</p>

<p>æ˜¾ç¤ºæŒ‡å®šçš„å‚æ•°ç±»å‹æ˜¯ä»å·¦åˆ°å³ä¾æ¬¡å±•å¼€ï¼Œå³</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">auto</span> <span class="n">val</span> <span class="o">=</span> <span class="n">sum</span><span class="o">&lt;</span><span class="kt">long</span> <span class="kt">long</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">long</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">lng</span><span class="p">);</span>
</code></pre></div></div>

<p>ä½†æ˜¯å¦‚æœ<code class="highlighter-rouge">T3</code>çš„ç±»å‹å¯ä»¥ç”±<code class="highlighter-rouge">T1</code>å’Œ<code class="highlighter-rouge">T2</code>æ¨å¯¼å‡ºï¼Œæˆ‘ä»¬æ­¤æ—¶å¯ä»¥ç”¨å°¾ç½®è¿”å›ç±»å‹</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">It</span><span class="o">&gt;</span>
<span class="k">auto</span> <span class="o">&amp;</span><span class="n">fn</span> <span class="p">(</span><span class="n">It</span> <span class="n">beg</span><span class="p">,</span> <span class="n">It</span> <span class="n">end</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">decltype</span><span class="p">(</span><span class="o">*</span><span class="n">beg</span><span class="p">)</span>

<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">};</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">v2</span> <span class="o">=</span> <span class="p">{</span><span class="s">"hi"</span><span class="p">,</span><span class="s">"bye"</span><span class="p">};</span>
<span class="k">auto</span> <span class="o">&amp;</span><span class="n">i</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">v1</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">v2</span><span class="p">.</span><span class="n">begin</span><span class="p">());</span> <span class="c1">//fnåº”è¯¥è¿”å›int&amp;</span>
<span class="k">auto</span> <span class="o">&amp;</span><span class="n">j</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">v2</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">v2</span><span class="p">.</span><span class="n">begin</span><span class="p">());</span> <span class="c1">//fnåº”è¯¥è¿”å›string&amp;</span>
</code></pre></div></div>
<p>æ­¤æ—¶<code class="highlighter-rouge">fn</code>å‡½æ•°çš„è¿”å›å€¼ç±»å‹å¯ç”±è¿­ä»£å™¨ç±»å‹<code class="highlighter-rouge">It</code>æ¨å¯¼å‡ºæ¥ï¼Œå› æ­¤æˆ‘ä»¬ä¸å¿…æ‰‹åŠ¨æŒ‡å®šå…¶ç±»å‹ã€‚</p>

<p>å¦‚æœæˆ‘ä»¬ç»§ç»­è¿½é—®è®©ä¸Šè¿°å‡½æ•°è¿”å›ä¸€ä¸ªâ€œå€¼â€è€Œéå¼•ç”¨æ—¶ï¼Œ<code class="highlighter-rouge">decltype(*beg)</code>å°±ä¸å¥æ•ˆäº†ï¼Œå› ä¸ºè¿­ä»£å™¨æ°¸è¿œè¿”å›å¼•ç”¨ç±»å‹ã€‚æ­¤æ—¶å¦‚æœæƒ³è¦è¿”å›å€¼ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨<code class="highlighter-rouge">type_traits</code>ã€‚å…·ä½“æ¥è¯´ï¼Œæœ‰ä¸¤ç§åŠæ³•</p>
<ul>
  <li>C++11ä¸­å¯ä»¥ä½¿ç”¨<code class="highlighter-rouge">remove_reference</code></li>
  <li>C++14ä¸­å¯ä»¥ä½¿ç”¨<code class="highlighter-rouge">std::decay</code></li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//c++ 11</span>
<span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">It</span><span class="o">&gt;</span>
<span class="k">auto</span> <span class="n">fn</span> <span class="p">(</span><span class="n">It</span> <span class="n">beg</span><span class="p">,</span> <span class="n">It</span> <span class="n">end</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">typename</span> <span class="n">std</span><span class="o">::</span><span class="n">remove_reference</span><span class="o">&lt;</span><span class="k">decltype</span><span class="p">(</span><span class="o">*</span><span class="n">beg</span><span class="p">)</span><span class="o">&gt;::</span><span class="n">type</span> <span class="p">{</span>
	<span class="k">return</span> <span class="o">*</span><span class="n">beg</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">//c++14</span>
<span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">It</span><span class="o">&gt;</span>
<span class="k">auto</span> <span class="n">fn</span> <span class="p">(</span><span class="n">It</span> <span class="n">beg</span><span class="p">,</span> <span class="n">It</span> <span class="n">end</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">typename</span> <span class="n">std</span><span class="o">::</span><span class="n">decay</span><span class="o">&lt;</span><span class="k">decltype</span><span class="p">(</span><span class="o">*</span><span class="n">beg</span><span class="p">)</span><span class="o">&gt;::</span><span class="n">type</span> <span class="p">{</span>
	<span class="k">return</span> <span class="o">*</span><span class="n">beg</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="å‡½æ•°æŒ‡é’ˆ">å‡½æ•°æŒ‡é’ˆ</h3>

<p>æˆ‘ä»¬å¯ä»¥ç”¨å‡½æ•°æ¨¡æ¿æ¥åˆå§‹åŒ–å‡½æ•°æŒ‡é’ˆï¼Œç¼–è¯‘å™¨å°†ç”¨å‡½æ•°æŒ‡é’ˆçš„ç±»å‹æ¥æ¨æ–­æ¨¡æ¿å‚æ•°çš„ç±»å‹</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="kt">int</span> <span class="nf">compare</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span><span class="p">,</span> <span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span><span class="p">);</span>
<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">fp1</span><span class="p">)(</span><span class="k">const</span> <span class="kt">int</span><span class="o">&amp;</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="n">compare</span><span class="p">;</span>
</code></pre></div></div>

<p>æ­¤æ—¶compareä¸­çš„Tå°†å®ä¾‹åŒ–ä¸ºintç±»å‹ï¼Œfp1åˆ™æŒ‡å‘å®ä¾‹åŒ–åçš„compareå‡½æ•°ã€‚åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥å°†compareçš„ä¸€ä¸ªç‰¹ä¾‹å½“åšå‚æ•°ä¼ ç»™æŸä¸ªå‡½æ•°</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">func</span><span class="p">(</span><span class="n">compare</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="ç±»æ¨¡æ¿">ç±»æ¨¡æ¿</h2>

<p>ç±»æ¨¡æ¿ä¸å‡½æ•°æ¨¡æ¿ç±»ä¼¼ï¼Œæ˜¯ä¸€ç§æ³›å‹æŠ€æœ¯ï¼Œä½†æ˜¯å’Œå‡½æ•°æ¨¡æ¿ä¸åŒçš„æ˜¯ï¼Œç±»æ¨¡æ¿çš„ç±»å‹å‚æ•°æ— æ³•é ç¼–è¯‘å™¨æ¨æ–­ï¼Œå¿…é¡»ç”±ä½¿ç”¨è€…æŒ‡å®šã€‚ç±»æ¨¡æ¿çš„å®šä¹‰æ–¹å¼å¦‚ä¸‹</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span><span class="o">&lt;</span><span class="err">ç±»å‹å‚æ•°è¡¨</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="err">ç±»æ¨¡æ¿å</span>
<span class="err">{</span>
	<span class="err">æˆå‘˜å‡½æ•°å’Œæˆå‘˜å˜é‡</span>
<span class="err">};</span>
</code></pre></div></div>

<p>å…¶ä¸­ï¼Œ<strong>ç±»å‹å‚æ•°è¡¨</strong>å¯ä»¥æœ‰å¤šä¸ªå‚æ•°ï¼Œæ¯”å¦‚<code class="highlighter-rouge">class T, class M,...</code>ã€‚æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä»¥ä¸€ä¸ª<code class="highlighter-rouge">Blob</code>ç±»ä¸ºä¾‹</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">Blob</span><span class="p">{</span>
    <span class="k">typedef</span> <span class="k">typename</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">size_type</span> <span class="n">size_type</span><span class="p">;</span>
<span class="nl">private:</span>
    <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span> <span class="n">data</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="n">Blob</span><span class="p">()</span><span class="o">:</span><span class="n">data</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span><span class="p">()){};</span>
    <span class="n">Blob</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">initializer_list</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">il</span><span class="p">)</span><span class="o">:</span><span class="n">data</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">il</span><span class="p">)){}</span>
    <span class="n">size_type</span> <span class="n">size</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">data</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">();</span> <span class="p">}</span>
    <span class="kt">bool</span> <span class="n">empty</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">data</span><span class="o">-&gt;</span><span class="n">empty</span><span class="p">();</span> <span class="p">}</span>
    <span class="kt">void</span> <span class="n">push_back</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">ele</span><span class="p">){</span> <span class="n">data</span><span class="o">-&gt;</span><span class="n">push_back</span><span class="p">(</span><span class="n">ele</span><span class="p">);}</span>
    <span class="kt">void</span> <span class="n">push_back</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span> <span class="n">ele</span><span class="p">){</span> <span class="n">data</span><span class="o">-&gt;</span><span class="n">push_back</span><span class="p">(</span><span class="n">ele</span><span class="p">);}</span>
    <span class="kt">void</span> <span class="n">pop_back</span><span class="p">();</span>
    <span class="n">T</span><span class="o">&amp;</span> <span class="n">back</span><span class="p">();</span>
    <span class="n">T</span><span class="o">&amp;</span> <span class="k">operator</span><span class="p">[](</span><span class="n">size_type</span> <span class="n">i</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª<code class="highlighter-rouge">Blob</code>çš„ç±»æ¨¡æ¿ï¼Œç”±ç±»æ¨¡æ¿å®ä¾‹åŒ–å¾—åˆ°çš„ç±»å«<strong>æ¨¡æ¿ç±»</strong>ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯¹<code class="highlighter-rouge">Blob</code>æ¨¡æ¿è¿›è¡Œ<code class="highlighter-rouge">int</code>å‹çš„å®ä¾‹åŒ–ï¼Œåˆ™ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„æ¨¡æ¿ç±»<code class="highlighter-rouge">Blob&lt;int&gt;</code>ï¼Œç›¸åº”çš„ï¼Œç¼–è¯‘å™¨ä¼šä¸ºå…¶ç”Ÿæˆå¦‚ä¸‹ä»£ç </p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span><span class="o">&lt;&gt;</span>
<span class="k">class</span> <span class="nc">Blob</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">{</span>
<span class="nl">private:</span>
	<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">data</span><span class="p">;</span>
<span class="nl">public:</span>
	<span class="p">...</span>
	<span class="n">Blob</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">initializer_list</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">il</span><span class="p">);</span>
	<span class="p">...</span>
	<span class="kt">int</span><span class="o">&amp;</span> <span class="k">operator</span><span class="p">[](</span><span class="n">size_type</span> <span class="n">i</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>
<p>ä¸Šè¿°ä»£ç å½¢å¼ä¹Ÿå«åš<strong>æ¨¡æ¿çš„ç‰¹ä¾‹åŒ–</strong>ï¼Œæˆ‘ä»¬åœ¨åé¢è¿˜ä¼šè®¨è®ºè¿™ç§å½¢å¼ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒåŒä¸€ä¸ªç±»æ¨¡æ¿çš„ä¸¤ä¸ªæ¨¡æ¿ç±»æ˜¯ä¸å…¼å®¹çš„ã€‚æ¯”å¦‚:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Blob</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span>
<span class="n">Blob</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span>
</code></pre></div></div>
<p>å¦‚æœç±»æ¨¡æ¿ä¸­æœ‰é»˜è®¤å‚æ•°ï¼Œåˆ™æ„é€ è¯¥ç±»å¯¹è±¡æ—¶æ— éœ€ä¼ å…¥ä»»ä½•å‚æ•°</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span> <span class="o">=</span> <span class="kt">int</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">Numbers</span> <span class="p">{</span>
<span class="nl">public:</span>
	<span class="n">Numbers</span><span class="p">(</span><span class="n">T</span> <span class="n">v</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span><span class="o">:</span><span class="n">val</span><span class="p">(</span><span class="n">v</span><span class="p">){}</span>
<span class="nl">private:</span>
	<span class="n">T</span> <span class="n">val</span><span class="p">;</span>
<span class="p">};</span>
<span class="n">Numbers</span><span class="o">&lt;</span><span class="kt">long</span><span class="o">&gt;</span> <span class="n">x1</span><span class="p">;</span> <span class="c1">//ç”¨longæ›¿æ¢T</span>
<span class="n">Numbers</span><span class="o">&lt;&gt;</span> <span class="n">x2</span><span class="p">;</span> <span class="c1">//ä½¿ç”¨é»˜è®¤çš„intï¼Œæ­¤æ—¶x2æ˜¯intå‹</span>
</code></pre></div></div>

<p>é€šå¸¸ï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨å‡½æ•°æ—¶æœ‰å£°æ˜å°±å¤Ÿäº†ï¼Œå£°æ˜åŒ…å«äº†è¿™ä¸ªå‡½æ•°çš„ç­¾åä¿¡æ¯ä»¥åŠç¬¦å·ã€‚ç±»ä¼¼çš„ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç±»å¯¹è±¡æ—¶ï¼Œç±»å¯¹è±¡çš„å®šä¹‰å¿…é¡»æ˜¯å¯ç”¨çš„ï¼Œä½†æˆå‘˜å‡½æ•°çš„å®šä¹‰å¯ä¸éœ€è¦ï¼Œé“ç†å’Œæ™®é€šå‡½æ•°ç›¸åŒã€‚å› æ­¤ï¼Œåœ¨C++ä¸­æˆ‘ä»¬å¯ä»¥å°†ç±»å®šä¹‰å’Œå‡½æ•°å£°æ˜æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œè€Œå°†æ™®é€šå‡½æ•°çš„å®šä¹‰å’Œæˆå‘˜å‡½æ•°çš„å®šä¹‰æ”¾åœ¨æºæ–‡ä»¶ä¸­ã€‚</p>

<p>å¯¹äºæ¨¡æ¿ç±»æˆ–è€…å‡½æ•°ï¼Œæƒ…å†µåˆ™ä¸ä¸€æ ·ï¼Œä¸ºäº†å®ä¾‹åŒ–ä¸€ä¸ªæ¨¡æ¿ï¼Œç¼–è¯‘å™¨å¿…é¡»è¦äº†è§£å‡½æ•°çš„å®šä¹‰æ‰èƒ½æ¨æ–­å‡ºç±»å‹å‚æ•°ã€‚å› æ­¤ï¼Œ<mark>å‡½æ•°æ¨¡æ¿æˆ–ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°çš„å®šä¹‰é€šå¸¸æ”¾åœ¨å¤´æ–‡ä»¶ä¸­</mark>ã€‚å¯¹äºåœ¨æºæ–‡ä»¶ä¸­å®šä¹‰çš„æˆå‘˜å‡½æ•°ï¼Œåˆ™è¦ä½¿ç”¨ä¸‹é¢è¯­æ³•ï¼š</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span><span class="o">&lt;</span><span class="err">å½¢å‚è¡¨</span><span class="o">&gt;</span>
<span class="err">è¿”å›å€¼ç±»å‹</span> <span class="err">ç±»æ¨¡æ¿å</span><span class="o">&lt;</span><span class="err">ç±»å‹å‚æ•°ååˆ—è¡¨</span><span class="o">&gt;::</span><span class="err">æˆå‘˜å‡½æ•°å</span><span class="p">(</span><span class="err">å‚æ•°è¡¨</span><span class="p">){}</span>
</code></pre></div></div>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­å®ç°<code class="highlighter-rouge">back</code>,<code class="highlighter-rouge">pop_back</code>æ–¹æ³•å’Œ<code class="highlighter-rouge">[]</code>ç¬¦å·é‡è½½</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="n">T</span><span class="o">&amp;</span> <span class="n">Blob</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">back</span><span class="p">(){</span>
    <span class="k">return</span> <span class="n">data</span><span class="o">-&gt;</span><span class="n">back</span><span class="p">();</span>
<span class="p">}</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="n">T</span><span class="o">&amp;</span> <span class="n">Blob</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="k">operator</span><span class="p">[](</span><span class="n">size_type</span> <span class="n">i</span><span class="p">){</span>
    <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">)[</span><span class="n">i</span><span class="p">];</span>
<span class="p">}</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="kt">void</span> <span class="n">Blob</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">pop_back</span><span class="p">(){</span> <span class="n">data</span><span class="o">-&gt;</span><span class="n">pop_back</span><span class="p">();</span> <span class="p">}</span>
</code></pre></div></div>

<p>æœ€åï¼Œå¦‚æœåœ¨ä¸€ä¸ªç±»æ¨¡æ¿ä¸­å‡ºç°è¯¥ç±»æœ¬èº«ï¼Œåˆ™å¯ä»¥å¿½ç•¥ç±»å‹å‚æ•°ï¼Œä¾‹å¦‚ä¸‹é¢ä»£ç </p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">Blob</span><span class="p">{</span>
	<span class="c1">//...</span>
    <span class="n">Blob</span> <span class="n">getBlob</span><span class="p">(){</span> <span class="c1">//æ­¤å¤„å¯ç›´æ¥è¿”å›Blobï¼Œè€Œä¸å¿…ä½¿ç”¨Blob&lt;T&gt;</span>
        <span class="k">return</span> <span class="n">Blob</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="ç±»æˆå‘˜æ¨¡æ¿">ç±»æˆå‘˜æ¨¡æ¿</h3>

<p>ä¸Šé¢æåˆ°äº†æ¨¡æ¿ç±»ä¸­çš„æˆå‘˜å‡½æ•°å’Œç±»æ¨¡æ¿å…±ç”¨å‚æ•°<code class="highlighter-rouge">T</code>çš„æƒ…å†µï¼Œå®é™…ä¸Šå¯¹äºæˆå‘˜å‡½æ•°æ¥è¯´ï¼Œå®ƒä»¬ä¹Ÿå¯ä»¥æ‹¥æœ‰è‡ªå·±çš„æ¨¡æ¿å‚æ•°ç±»å‹ã€‚æ­¤æ—¶åˆå¯ä»¥åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯ä¸€ä¸ªæ™®é€šç±»ï¼Œå®ƒçš„æˆå‘˜å‡½æ•°æ˜¯æ¨¡æ¿ï¼Œå¦ä¸€ç§æ˜¯ä¸Šé¢æåˆ°çš„æ¨¡æ¿ç±»ï¼Œä½†æ˜¯å®ƒçš„æˆå‘˜å‡½æ•°çš„æ¨¡æ¿ç±»å‹å’Œç±»æ¨¡æ¿ä¸åŒ</p>

<p>æˆ‘ä»¬å…ˆè¯´ç¬¬ä¸€ç§æƒ…å†µï¼Œè¿™ç§æƒ…å†µæ¯”è¾ƒç®€å•ï¼Œ<mark>ç›¸å½“äºå®šä¹‰ä¸€ä¸ªæ™®é€šçš„å‡½æ•°æ¨¡æ¿</mark></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">DebugDelete</span> <span class="p">{</span>
<span class="nl">public:</span>
	<span class="n">DebugDelete</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span> <span class="o">&amp;</span><span class="n">s</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="p">)</span><span class="o">:</span><span class="n">os</span><span class="p">(</span><span class="n">s</span><span class="p">){}</span>
	<span class="n">tempalte</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
	<span class="kt">void</span> <span class="k">operator</span><span class="p">()(</span><span class="n">T</span><span class="o">*</span> <span class="n">p</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
		<span class="n">os</span><span class="o">&lt;&lt;</span><span class="s">"deleting unique ptr"</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
		<span class="k">delete</span> <span class="n">p</span><span class="p">;</span>
	<span class="p">}</span>
<span class="nl">private:</span>
	<span class="n">std</span><span class="o">::</span><span class="n">ostream</span> <span class="o">&amp;</span><span class="n">os</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
<p>ä½¿ç”¨æ–¹å¼ä¹Ÿå’Œæ™®é€šçš„æ¨¡æ¿å‡½æ•°ç›¸åŒï¼Œå¯¹äºä¸åŒçš„å‚æ•°ç±»å‹ä¼šå®ä¾‹åŒ–å‡ºä¸åŒçš„å‡½æ•°æ¨¡æ¿ï¼Œæ¯”å¦‚</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">double</span><span class="p">;</span>
<span class="n">DebugDelete</span> <span class="n">d</span><span class="p">;</span>
<span class="n">d</span><span class="p">(</span><span class="n">p</span><span class="p">);</span> <span class="c1">//void DebugDelete::operator()&lt;double&gt;(double* p) const;</span>
</code></pre></div></div>
<p>å¯¹äºç¬¬äºŒç§æƒ…å†µï¼Œæˆ‘ä»¬ä»¥ä¸‹é¢ä»£ç ä¸ºä¾‹</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="k">struct</span> <span class="n">Obj</span> <span class="p">{</span>
    <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">U</span><span class="o">&gt;</span>
    <span class="kt">void</span> <span class="n">func</span><span class="p">(</span><span class="n">U</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//implementation</span>
    <span class="p">};</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="n">Obj</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">o</span><span class="p">;</span>
    <span class="n">o</span><span class="p">.</span><span class="n">func</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="mf">10.0</span><span class="n">f</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
<p>ä¸Šé¢ä¾‹å­ä¸­æˆ‘ä»¬åˆ†åˆ«ä¼ å…¥äº†ä¸åŒçš„æ¨¡æ¿å‚æ•°ï¼Œç¼–è¯‘å™¨å¯ä»¥æ­£ç¡®æ¨æ–­å‡ºæ¨¡æ¿çš„ç±»å‹ã€‚ä½†æ˜¯æœ‰äº›æƒ…å†µç¼–è¯‘å™¨å°†æ— æ³•å¾—åˆ°æ­£ç¡®ç»“æœï¼Œæ¯”å¦‚ä¸‹é¢ä¾‹å­</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="kt">void</span> <span class="nf">f1</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Obj</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">o</span><span class="p">;</span>
    <span class="n">o</span><span class="p">.</span><span class="n">func</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>
<p>æ­¤æ—¶æˆ‘ä»¬åœ¨ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ä¸­åˆ›å»ºäº†ä¸€ä¸ª<code class="highlighter-rouge">Obj</code>å¯¹è±¡ï¼Œå¹¶è°ƒç”¨å®ƒçš„<code class="highlighter-rouge">func</code>æ–¹æ³•ï¼Œæ­¤æ—¶ç¼–è¯‘å™¨å°†æ— æ³•çŸ¥é“<code class="highlighter-rouge">T</code>æ˜¯ä¸€ä¸ªç±»å‹è¿˜æ˜¯ä¸€ä¸ªå˜é‡åï¼Œé»˜è®¤æƒ…å†µä¸‹<code class="highlighter-rouge">&lt;</code>å’Œ<code class="highlighter-rouge">&gt;</code>ä¼šè¢«å½“åšå°äºå’Œå¤§äºå·è¿›è¡Œå¤„ç†ï¼Œå› æ­¤ä¸Šè¿°ä»£ç ç¼–è¯‘å™¨ä¼šç†è§£ä¸º</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">o</span><span class="p">.</span><span class="n">func</span><span class="o">&lt;</span><span class="n">T</span><span class="p">)</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span>
</code></pre></div></div>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®çš„å‘Šè¯‰ç¼–è¯‘å™¨<code class="highlighter-rouge">T</code>æ˜¯ä¸€ä¸ªæ¨¡æ¿å‚æ•°ï¼Œå…·ä½“åšæ³•æ˜¯ä½¿ç”¨<code class="highlighter-rouge">.template</code></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">o</span><span class="p">.</span><span class="n">tempate</span> <span class="n">func</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="ç±»æ¨¡æ¿çš„staticæˆå‘˜">ç±»æ¨¡æ¿çš„<code class="highlighter-rouge">static</code>æˆå‘˜</h3>

<p>ç±»æ¨¡æ¿å¯ä»¥æœ‰staticæˆå‘˜ï¼Œæ¯”å¦‚ä¸‹é¢çš„ç±»æ¨¡æ¿ï¼š</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span> 
<span class="k">class</span> <span class="nc">Foo</span> <span class="p">{</span>
<span class="nl">public:</span>
	<span class="k">static</span> <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">count</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">return</span> <span class="n">ctr</span><span class="p">;</span>
	<span class="p">}</span>
<span class="nl">private:</span>
	<span class="k">static</span> <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">ctr</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="kt">size_t</span> <span class="n">Foo</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">ctr</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">//æ¯ä¸ª`static`æˆå‘˜åœ¨å®šä¹‰æ—¶å¿…é¡»åˆå§‹åŒ–ï¼š</span>
</code></pre></div></div>
<p>æ¯ä¸ª<code class="highlighter-rouge">Foo</code>çš„å®ä¾‹éƒ½æœ‰å…¶è‡ªå·±çš„<code class="highlighter-rouge">static</code>æˆå‘˜å®ä¾‹ã€‚å³å¯¹ä»»æ„ç»™å®šçš„<code class="highlighter-rouge">X</code>éƒ½æœ‰ä¸€ä¸ª<code class="highlighter-rouge">Foo&lt;X&gt;::ctr</code>å’Œä¸€ä¸ª<code class="highlighter-rouge">Foo&lt;X&gt;::count</code>æˆå‘˜ã€‚æ‰€æœ‰çš„<code class="highlighter-rouge">Foo&lt;X&gt;</code>ç±»å‹çš„å¯¹è±¡å…±äº«ç›¸åŒçš„<code class="highlighter-rouge">ctr</code>å¯¹è±¡å’Œ<code class="highlighter-rouge">count</code>å‡½æ•°ã€‚</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Foo</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">f1</span><span class="p">,</span><span class="n">f2</span><span class="p">,</span><span class="n">f3</span><span class="p">;</span> <span class="c1">//f1,f2,f3äº«æœ‰å…±åŒçš„`Foo&lt;int&gt;::ctr`å’Œ`Foo&lt;int&gt;::count()`</span>

<span class="n">Foo</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">fi</span><span class="p">;</span> <span class="c1">//å®ä¾‹åŒ–Foo&lt;int&gt;ç±»å’Œstaticæˆå‘˜ctr</span>
<span class="k">auto</span> <span class="n">ct</span> <span class="o">=</span> <span class="n">Foo</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">count</span><span class="p">();</span> <span class="c1">//å®ä¾‹åŒ–Foo&lt;int&gt;::count</span>
<span class="n">ct</span> <span class="o">=</span> <span class="n">fi</span><span class="p">.</span><span class="n">count</span><span class="p">();</span> <span class="c1">//ç­‰ä»·è°ƒç”¨ </span>
</code></pre></div></div>
<p><mark>ç±»ä¼¼ä»»ä½•å…¶ä»–æˆå‘˜å‡½æ•°ï¼Œ`static`æˆå‘˜å‡½æ•°åªæœ‰åœ¨ä½¿ç”¨æ—¶æ‰ä¼šè¢«å®ä¾‹åŒ–</mark></p>

<h2 id="resources">Resources</h2>

<ul>
  <li><a href="http://www.charleshouserjr.com/Cplus2.pdf">C++ Primer</a></li>
</ul>
:ET