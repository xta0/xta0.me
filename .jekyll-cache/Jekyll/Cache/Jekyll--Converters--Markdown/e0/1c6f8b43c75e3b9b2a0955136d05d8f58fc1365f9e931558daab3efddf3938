I"p<p>æ·±æœçš„å¦å¤–ä¸¤ä¸ªç»å…¸æ¡ˆä¾‹æ˜¯Nçš‡åé—®é¢˜å’Œæ±‚è§£æ•°ç‹¬é—®é¢˜ï¼Œç”±äºè¿™ä¸¤ä¸ªé—®é¢˜è¾ƒä¸ºå¤æ‚ï¼Œè§£ç©ºé—´çš„èŒƒå›´å¤ªå¤§ï¼Œå¦‚æœä¸åšä¼˜åŒ–ï¼Œå½“æ•°æ®è§„æ¨¡å˜å¤§æ—¶ï¼Œå…¶ç®—æ³•æ—¶é—´å°†ä¼šå‘ˆæŒ‡æ•°çº§ä¸Šå‡ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦å¯»æ‰¾ä¸€äº›ä¼˜åŒ–æŠ€å·§ï¼Œå‰ªæå°±æ˜¯å…¶ä¸­ä¸€ä¸ªå¸¸ç”¨çš„æ‰‹æ®µã€‚æ‰€è°“å‰ªææ˜¯æŒ‡åœ¨æ·±æœè¿‡ç¨‹ä¸­ï¼Œå¯¹ä¸å¿…è¦çš„è·¯å¾„è¿›è¡Œè£å‰ªï¼Œä»è€ŒåŠ å¿«æœç´¢é€Ÿåº¦ã€‚</p>

<h3 id="nçš‡åé—®é¢˜">Nçš‡åé—®é¢˜</h3>

<blockquote>
  <p>ç»™ä½ ä¸ªNxNçš„æ£‹ç›˜ï¼Œåœ¨æ£‹ç›˜ä¸Šæ‘†æ”¾Nä¸ªçš‡åï¼Œä½¿å¾—è¿™Nä¸ªçš‡åæ— æ³•ç›¸äº’æ”»å‡»ï¼ˆçš‡åå¯ä»¥æ¨ªç«–æ”»å‡»ï¼Œå¯¹è§’çº¿æ”»å‡»ï¼‰ï¼Œå¦‚ä¸‹å›¾ä¸­æ˜¯ä¸€ä¸ª8çš‡åé—®é¢˜çš„ä¸€ä¸ªè§£ï¼Œè¯·ç»™å‡ºæ»¡è¶³Nçš‡åæ¡ä»¶çš„æ‰€æœ‰æ‘†æ³•</p>
</blockquote>

<p><img src="/assets/images/2015/08/8-queens.png" /></p>

<p>è§£è¿™ä¸ªé—®é¢˜çš„æ€è·¯å°±æ˜¯ç”¨DFSä¸æ–­çš„é€’å½’+å›æº¯ï¼Œç©·ä¸¾æ‰€æœ‰çš„å¯èƒ½çš„æƒ…å†µã€‚å…¶ç®—æ³•æ­¥éª¤å¦‚ä¸‹ï¼š</p>

<ol>
  <li>ç”±äºæ¯ä¸ªè¡Œæˆ–è€…åˆ—åªèƒ½æ”¾ç½®ä¸€ä¸ªçš‡åï¼Œå› æ­¤DFSå¯ä»¥æŒ‰è¡Œæœç´¢ï¼Œåœ¨æ¯è¡Œä¸­ä¸æ–­å°è¯•æ¯ä¸ªåˆ—çš„ä½ç½®</li>
  <li>å½“æ”¾ç½®ä¸€ä¸ªçš‡ååï¼Œåœ¨æ£‹ç›˜ä¸Šå°†è¯¥ä½ç½®ä»¥åŠå…¶å¯èƒ½æ”»å‡»çš„ä½ç½®å‡ç½®ä¸ºä¸å¯ç”¨</li>
  <li>æœç´¢åˆ°ä¸å¯ç”¨çš„ä½ç½®æ—¶ï¼Œç›´æ¥è·³è¿‡ï¼Œè¿›è¡Œå‰ªææ“ä½œ</li>
  <li>ç®—æ³•æ—¶é—´å¤æ‚åº¦ä¸ºæŒ‡æ•°çº§</li>
</ol>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//è¡¨ç¤ºç›˜ä¸­çš„æ¯ä¸ªç‚¹</span>
<span class="k">struct</span> <span class="n">PT</span><span class="p">{</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">j</span><span class="p">;</span>
    <span class="kt">bool</span> <span class="k">operator</span><span class="o">&lt;</span><span class="p">(</span><span class="k">const</span> <span class="n">PT</span><span class="o">&amp;</span> <span class="n">pt</span><span class="p">)</span> <span class="k">const</span><span class="p">{</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">pt</span><span class="p">.</span><span class="n">i</span><span class="p">){</span>
            <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="o">==</span><span class="n">pt</span><span class="p">.</span><span class="n">i</span><span class="p">){</span>
            <span class="k">return</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">pt</span><span class="p">.</span><span class="n">j</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
    <span class="c1">//æ”¾ç½®ä¸€ä¸ªçš‡åï¼Œæ›´æ–°æ£‹ç›˜çŠ¶æ€</span>
    <span class="n">set</span><span class="o">&lt;</span><span class="n">PT</span><span class="o">&gt;</span> <span class="n">place</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;&gt;&amp;</span> <span class="n">board</span><span class="p">){</span>
        <span class="n">set</span><span class="o">&lt;</span><span class="n">PT</span><span class="o">&gt;</span> <span class="n">us</span><span class="p">;</span>
        <span class="c1">//ç«–å‘</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">k</span><span class="o">&lt;</span><span class="n">board</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="n">k</span><span class="o">++</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">!=</span><span class="sc">'.'</span> <span class="o">&amp;&amp;</span> <span class="n">board</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">'Q'</span><span class="p">){</span>
                <span class="n">board</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="sc">'.'</span><span class="p">;</span>
                <span class="n">us</span><span class="p">.</span><span class="n">insert</span><span class="p">({</span><span class="n">k</span><span class="p">,</span><span class="n">j</span><span class="p">});</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="c1">//æ¨ªå‘</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">k</span><span class="o">&lt;</span><span class="n">board</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="n">k</span><span class="o">++</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">'.'</span> <span class="o">&amp;&amp;</span> <span class="n">board</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">'Q'</span><span class="p">){</span>
                <span class="n">board</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span><span class="o">=</span> <span class="sc">'.'</span><span class="p">;</span>
                <span class="n">us</span><span class="p">.</span><span class="n">insert</span><span class="p">({</span><span class="n">i</span><span class="p">,</span><span class="n">k</span><span class="p">});</span>
            <span class="p">}</span>
            
        <span class="p">}</span>
        <span class="c1">//å¯¹è§’çº¿1</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">p</span><span class="o">=</span><span class="n">i</span><span class="p">,</span> <span class="n">q</span><span class="o">=</span><span class="n">j</span><span class="p">;</span> <span class="n">p</span><span class="o">&gt;=</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">q</span><span class="o">&gt;=</span><span class="mi">0</span> <span class="p">;</span> <span class="n">p</span><span class="o">--</span><span class="p">,</span><span class="n">q</span><span class="o">--</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">p</span><span class="p">][</span><span class="n">q</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">'.'</span> <span class="o">&amp;&amp;</span> <span class="n">board</span><span class="p">[</span><span class="n">p</span><span class="p">][</span><span class="n">q</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">'Q'</span><span class="p">){</span>
                <span class="n">board</span><span class="p">[</span><span class="n">p</span><span class="p">][</span><span class="n">q</span><span class="p">]</span> <span class="o">=</span> <span class="sc">'.'</span><span class="p">;</span>
                <span class="n">us</span><span class="p">.</span><span class="n">insert</span><span class="p">({</span><span class="n">p</span><span class="p">,</span><span class="n">q</span><span class="p">});</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">p</span><span class="o">=</span><span class="n">i</span><span class="p">,</span><span class="n">q</span><span class="o">=</span><span class="n">j</span><span class="p">;</span> <span class="n">p</span><span class="o">&lt;</span><span class="n">board</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">&amp;&amp;</span><span class="n">q</span><span class="o">&lt;</span><span class="n">board</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="n">p</span><span class="o">++</span><span class="p">,</span><span class="n">q</span><span class="o">++</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">p</span><span class="p">][</span><span class="n">q</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">'.'</span> <span class="o">&amp;&amp;</span> <span class="n">board</span><span class="p">[</span><span class="n">p</span><span class="p">][</span><span class="n">q</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">'Q'</span><span class="p">){</span>
                <span class="n">board</span><span class="p">[</span><span class="n">p</span><span class="p">][</span><span class="n">q</span><span class="p">]</span> <span class="o">=</span> <span class="sc">'.'</span><span class="p">;</span>
                <span class="n">us</span><span class="p">.</span><span class="n">insert</span><span class="p">({</span><span class="n">p</span><span class="p">,</span><span class="n">q</span><span class="p">});</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="c1">//å¯¹è§’çº¿2</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">p</span><span class="o">=</span><span class="n">i</span><span class="p">,</span><span class="n">q</span><span class="o">=</span><span class="n">j</span><span class="p">;</span> <span class="n">p</span><span class="o">&gt;=</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">q</span><span class="o">&lt;</span><span class="n">board</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="n">p</span><span class="o">--</span><span class="p">,</span><span class="n">q</span><span class="o">++</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">p</span><span class="p">][</span><span class="n">q</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">'.'</span> <span class="o">&amp;&amp;</span> <span class="n">board</span><span class="p">[</span><span class="n">p</span><span class="p">][</span><span class="n">q</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">'Q'</span><span class="p">){</span>
                <span class="n">board</span><span class="p">[</span><span class="n">p</span><span class="p">][</span><span class="n">q</span><span class="p">]</span> <span class="o">=</span> <span class="sc">'.'</span><span class="p">;</span>
                <span class="n">us</span><span class="p">.</span><span class="n">insert</span><span class="p">({</span><span class="n">p</span><span class="p">,</span><span class="n">q</span><span class="p">});</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">p</span><span class="o">=</span><span class="n">i</span><span class="p">,</span><span class="n">q</span><span class="o">=</span><span class="n">j</span><span class="p">;</span> <span class="n">p</span><span class="o">&lt;</span><span class="n">board</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">q</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span><span class="n">p</span><span class="o">++</span><span class="p">,</span><span class="n">q</span><span class="o">--</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">p</span><span class="p">][</span><span class="n">q</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">'.'</span> <span class="o">&amp;&amp;</span> <span class="n">board</span><span class="p">[</span><span class="n">p</span><span class="p">][</span><span class="n">q</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">'Q'</span><span class="p">){</span>
                <span class="n">board</span><span class="p">[</span><span class="n">p</span><span class="p">][</span><span class="n">q</span><span class="p">]</span> <span class="o">=</span> <span class="sc">'.'</span><span class="p">;</span>
                <span class="n">us</span><span class="p">.</span><span class="n">insert</span><span class="p">({</span><span class="n">p</span><span class="p">,</span><span class="n">q</span><span class="p">});</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">board</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="sc">'Q'</span><span class="p">;</span>
        <span class="n">us</span><span class="p">.</span><span class="n">insert</span><span class="p">({</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">});</span>
        <span class="k">return</span> <span class="n">us</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">//å›æº¯æ£‹å­åå¤åŸæ£‹ç›˜çŠ¶æ€</span>
    <span class="kt">void</span> <span class="n">unplace</span><span class="p">(</span><span class="n">set</span><span class="o">&lt;</span><span class="n">PT</span><span class="o">&gt;&amp;</span> <span class="n">us</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;&gt;&amp;</span> <span class="n">board</span><span class="p">){</span>
        <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">itor</span> <span class="o">=</span> <span class="n">us</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">itor</span><span class="o">!=</span><span class="n">us</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="n">itor</span><span class="o">++</span><span class="p">){</span>
            <span class="k">auto</span> <span class="n">p</span> <span class="o">=</span> <span class="o">*</span><span class="n">itor</span><span class="p">;</span>
            <span class="n">board</span><span class="p">[</span><span class="n">p</span><span class="p">.</span><span class="n">i</span><span class="p">][</span><span class="n">p</span><span class="p">.</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="sc">'x'</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">//æ·±æœ</span>
    <span class="kt">void</span> <span class="n">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">int</span> <span class="n">row</span><span class="p">,</span> <span class="kt">int</span> <span class="n">sz</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;&gt;&amp;</span> <span class="n">board</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&gt;&amp;</span> <span class="n">result</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
            <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">vec</span><span class="o">:</span><span class="n">board</span><span class="p">){</span>
                <span class="n">string</span> <span class="n">tmp</span><span class="o">=</span><span class="s">""</span><span class="p">;</span>
                <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">c</span><span class="o">:</span><span class="n">vec</span><span class="p">){</span>
                    <span class="n">tmp</span><span class="o">+=</span><span class="n">c</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="n">v</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">tmp</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">//æŒ‰è¡Œæœç´¢ï¼Œå°è¯•åˆ—ä½ç½®ï¼Œjä»£è¡¨åˆ—</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">sz</span> <span class="o">&amp;&amp;</span> <span class="n">row</span><span class="o">&lt;</span><span class="n">sz</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'x'</span><span class="p">){</span> <span class="c1">//å‰ªæ</span>
                <span class="c1">//choose</span>
                <span class="k">auto</span> <span class="n">pts</span> <span class="o">=</span> <span class="n">place</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">board</span><span class="p">);</span>
                <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">"set state: "</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
                <span class="n">log</span><span class="p">(</span><span class="n">board</span><span class="p">);</span>
                <span class="n">n</span><span class="o">-=</span><span class="mi">1</span><span class="p">;</span>
                <span class="c1">//æ·±æœ</span>
                <span class="n">dfs</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">row</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">sz</span><span class="p">,</span><span class="n">board</span><span class="p">,</span><span class="n">result</span><span class="p">);</span>
                <span class="c1">//backtrack</span>
                <span class="n">n</span><span class="o">+=</span><span class="mi">1</span><span class="p">;</span>
                <span class="n">unplace</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">board</span><span class="p">);</span>
                <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">"reset state: "</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
                <span class="n">log</span><span class="p">(</span><span class="n">board</span><span class="p">);</span>

            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">//æ‰“å°æ£‹ç›˜çŠ¶æ€</span>
   <span class="kt">void</span> <span class="n">log</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;&gt;&amp;</span> <span class="n">board</span><span class="p">){</span>
        <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">vec</span><span class="o">:</span><span class="n">board</span><span class="p">){</span>
            <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">c</span><span class="o">:</span><span class="n">vec</span><span class="p">){</span>
                <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">c</span><span class="o">&lt;&lt;</span><span class="s">" "</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">"--------"</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    
<span class="nl">public:</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&gt;</span> <span class="n">solveNQueens</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;&gt;</span> <span class="n">board</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="sc">'x'</span><span class="p">));</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&gt;</span> <span class="n">ans</span><span class="p">;</span>
        <span class="n">dfs</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">board</span><span class="p">,</span><span class="n">ans</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="sudokué—®é¢˜">Sudokué—®é¢˜</h3>

<p>æˆ‘ä»¬å†æ¥çœ‹ä¸€é“æ•°ç‹¬é—®é¢˜ï¼Œå’ŒNçš‡åé—®é¢˜ä¸€æ ·ï¼Œæ±‚è§£æ•°ç‹¬é—®é¢˜ä¹Ÿæ˜¯ä¸€ä¸ªåˆ©ç”¨æš´åŠ›æœç´¢çš„å…¸å‹åº”ç”¨ã€‚</p>

<blockquote>
  <p>å°†æ•°å­—1åˆ°9,å¡«å…¥9x9çŸ©é˜µä¸­çš„å°æ–¹æ ¼ï¼Œä½¿å¾—çŸ©é˜µä¸­çš„æ¯è¡Œï¼Œæ¯åˆ—ï¼Œæ¯ä¸ª3x3çš„å°æ ¼å­å†…ï¼Œ9ä¸ªæ•°å­—éƒ½ä¼šå‡ºç°â€ã€‚</p>
</blockquote>

<div class="md-flex-h md-flex-no-wrap md-margin-bottom-12">
<div><img src="/assets/images/2015/08/Sudoku-1.jpg" /></div>
<div class="md-margin-right-12"><img src="/assets/images/2015/08/Sudoku-2.jpg" /></div>
</div>

<p>è§£æ•°ç‹¬é—®é¢˜çš„æ€è·¯ä¸ºåœ¨æ¯ä¸ªç©ºä½ä¾æ¬¡å°è¯•ä»1-9çš„æ¯ä¸ªå€¼ï¼Œæ¯æ”¾ç½®ä¸€ä¸ªåè¿›è¡ŒDFSæœç´¢ï¼Œå¦‚æœæ‰€æœ‰ç©ºä½éƒ½èƒ½å¡«æ»¡åˆ™è¿”å›ä¸€ç»„è§£ï¼Œå¦‚æœæœ‰ç©ºä½ä¸æ»¡è¶³æ¡ä»¶ï¼Œåˆ™è¿›è¡Œå›æœ”ï¼Œé‡ç½®çŠ¶æ€åå†æ¢å¦ä¸€ä¸ªæ•°å­—å°è¯•DFSï¼ŒçŸ¥é“å°è¯•å®Œæ‰€æœ‰çš„ç©ºä½ã€‚</p>

<p>```cpp</p>

<p>vector&lt;vector<bool>&gt; row_state(9,vector<bool>(10,false)); //æ ‡å¿—ä½ï¼Œå­˜æ”¾æ¯è¡Œ1-9å‡ºç°çš„æ ‡å¿—ï¼Œ1ä¸ºæ”¾ç½®ï¼Œ0ä¸ºæœªæ”¾ç½®
vector&lt;vector<bool>&gt; col_state(9,vector<bool>(10,false)); //æ ‡å¿—ä½ï¼Œå­˜æ”¾æ¯åˆ—1-9å‡ºç°çš„æ ‡å¿—ï¼Œ1ä¸ºæ”¾ç½®ï¼Œ0ä¸ºæœªæ”¾ç½®
vector&lt;vector<bool>&gt; block_state(9,vector<bool>(10,false)); //æ ‡å¿—ä½ï¼Œå­˜æ”¾æ¯ä¸ªå°å—1-9å‡ºç°çš„æ ‡å¿—ï¼Œ1ä¸ºæ”¾ç½®ï¼Œ0ä¸ºæœªæ”¾ç½®</bool></bool></bool></bool></bool></bool></p>

<p>//æ ¹æ®xï¼Œyè®¡ç®—å¯¹åº”çš„block index
int blockIndex(int r, int c){
  return r/3 * 3 + c/3;
}</p>

<p>//æ¯æ”¾ä¸€ä¸ªæ£‹å­éœ€è¦æ›´æ–° state
void set_state(int r, int c, int num, bool value){
  int index = blockIndex(r,c);
  col_state[c][num] = value;
  row_state[r][num] = value;
  block_state[index][num] = value;
}
//å½“å‰ä½ç½®æ˜¯å¦å·²ç»è¢«æ”¾ç½®è¿‡
bool is_valid(int r, int c , int num){
  int index = blockIndex(r,c);
  if(!row_state[r][num] &amp;&amp; 
     !col_state[c][num] &amp;&amp; 
     !block_state[index][num]){
    return true;
  }
  return false;
}
bool dfs(int index, vector&lt;pair&lt;int,intÂ»&amp; blanks, vector&lt;vector<char>&gt;&amp; board){</char></p>

<p>if(index &gt;= blanks.size()){
    return true;
  }
  int row = blanks[index].first;
  int col = blanks[index].second;</p>

<p>//æ¯ä¸ªç©ºç™½ä½ç½®å°è¯•1-9
  for(int n=1;n&lt;=9;n++){<br />
      if(!is_valid(row,col,n)){
        continue;
      }
      //choose
      set_state(row,col,n,true);
      //dfs
      if(dfs(index+1,blanks,board)){
        //å‰ªæ
        return true;
      }else{
        //backtracking<br />
        set_state(row,col,n,false);
      }
  }
  return false;
}</p>

<p>bool sudokuSolve( const vector&lt;vector<char>&gt;&amp; input ) {</char></p>

<p>vector&lt;vector<char>&gt; board = input;
  vector&lt;pair&lt;int,int&gt;&gt; blanks;</char></p>

<p>for(int i=0; i&lt;board.size(); i++){
    for(int j=0;j&lt;board.size();j++){
      char c = board[i][j];
      int num = c-â€˜0â€™;
      if(c == â€˜.â€™){
        blanks.push_back({i,j});
      }else{
        //modify the board
        set_state(i,j,num,true);
      }
    } 
  }
  //æ·±æœ
  return dfs(0,blanks,board);
}</p>

<h2 id="resources">Resources</h2>

<ul>
  <li><a href="https://www.youtube.com/watch?v=NcZ2cu7gc-A&amp;list=PLnfg8b9vdpLn9exZweTJx44CII1bYczuk">CS106B-Stanford-YouTube</a></li>
  <li><a href="https://www.coursera.org/learn/algorithms-divide-conquer/home/welcome">Algorithms-Stanford-Cousera</a></li>
  <li><a href="https://www.coursera.org/learn/shuju-jiegou-suanfa/home/welcome">ç®—æ³•ä¸æ•°æ®ç»“æ„-1-åŒ—å¤§-Cousera</a></li>
  <li><a href="https://www.coursera.org/learn/gaoji-shuju-jiegou/home/welcome">ç®—æ³•ä¸æ•°æ®ç»“æ„-2-åŒ—å¤§-Cousera</a></li>
  <li><a href="https://courses.edx.org/courses/course-v1:TsinghuaX+30240184.1x+3T2017/course/">ç®—æ³•ä¸æ•°æ®ç»“æ„-1-æ¸…å-EDX</a></li>
  <li><a href="https://courses.edx.org/courses/course-v1:PekingX+04833050X+1T2016/course/">ç®—æ³•ä¸æ•°æ®ç»“æ„-2-æ¸…å-EDX</a></li>
  <li><a href="https://www.coursera.org/learn/algorithms/home/welcome">ç®—æ³•è®¾è®¡ä¸åˆ†æ-1-åŒ—å¤§-Cousera</a></li>
  <li><a href="https://courses.edx.org/courses/course-v1:PekingX+04833050X+1T2016/course/">ç®—æ³•è®¾è®¡ä¸åˆ†æ-2-åŒ—å¤§-EDX</a></li>
</ul>

<h3 id="å…³äºdfsçš„æ›´å¤šé—®é¢˜">å…³äºDFSçš„æ›´å¤šé—®é¢˜</h3>

<ul>
  <li><a href="https://leetcode.com/problems/generate-parentheses/description/">22. Generate Parentheses</a></li>
  <li><a href="https://leetcode.com/problems/n-queens/description/">51. N-Queens</a></li>
  <li><a href="https://leetcode.com/problems/n-queens-ii/">52. N-Queens II</a></li>
</ul>
:ET