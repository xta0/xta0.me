I"&²<p><em></em></p>

<blockquote>
  <p>###Ruby 2.0 ç®€æ˜è¯­æ³•æ•´ç†</p>
</blockquote>

<p>##ç›®å½•</p>

<ul>
  <li><a href="#var">å˜é‡/å¸¸é‡</a></li>
  <li><a href="#type">ç±»å‹è½¬æ¢</a></li>
  <li><a href="#expression">è¡¨è¾¾å¼</a></li>
  <li><a href="#string">å­—ç¬¦ä¸²</a></li>
  <li><a href="#control-flow">æ§åˆ¶æµ</a></li>
  <li><a href="#symbol">ç¬¦å·</a></li>
  <li><a href="#array">æ•°ç»„</a></li>
  <li><a href="#hash">Hash</a></li>
  <li><a href="#itor">è¿­ä»£å™¨</a></li>
  <li><a href="#block">Block</a></li>
  <li><a href="#proc">Proc</a></li>
  <li><a href="#lambda">Lambda</a></li>
  <li><a href="#class">ç±»</a></li>
  <li><a href="#namespace">å‘½åç©ºé—´</a></li>
  <li><a href="#module">Module</a></li>
  <li><a href="#include">Include</a></li>
  <li><a href="#exception">å¼‚å¸¸</a></li>
  <li><a href="#file">æ–‡ä»¶æ“ä½œ</a></li>
  <li><a href="#env">ENV</a></li>
  <li><a href="#kernel">Kernel</a></li>
  <li><a href="#object">Object</a></li>
  <li><a href="#date">Date</a></li>
  <li><a href="#yaml">YAML</a></li>
  <li><a href="#erb">ERB</a></li>
</ul>

<h3 id="var">å˜é‡/å¸¸é‡</h3>

<ul>
  <li>å…¨å±€å˜é‡$æ ‡è¯†</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">basic_method</span>
  <span class="nb">puts</span> <span class="vg">$x</span>
<span class="k">end</span>

<span class="vg">$x</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">basic_method</span><span class="p">()</span>

</code></pre></div></div>

<ul>
  <li>å…¨å±€å¸¸é‡å¤§å†™å¼€å¤´</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="no">CONST_V</span> <span class="o">=</span> <span class="s2">"abc"</span>

</code></pre></div></div>

<h3 id="type"> ç±»å‹ </h3>

<ul>
  <li>æ•´å‹ï¼Œæµ®ç‚¹å‹ï¼Œå­—ç¬¦ä¸²</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="nb">print</span> <span class="n">a</span><span class="p">.</span><span class="nf">to_f</span> <span class="c1">#10.0</span>

<span class="n">a</span> <span class="o">=</span> <span class="mf">3.3</span>
<span class="nb">print</span> <span class="n">a</span><span class="p">.</span><span class="nf">to_i</span>

<span class="n">a</span> <span class="o">=</span> <span class="mi">100</span>
<span class="nb">print</span> <span class="n">a</span><span class="p">.</span><span class="nf">to_s</span>

</code></pre></div></div>

<ul>
  <li>æµ®ç‚¹å‹</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">d</span> <span class="o">=</span> <span class="mf">7.3</span><span class="o">-</span><span class="mf">7.2</span>
<span class="nb">puts</span> <span class="n">d</span> 
<span class="o">=&gt;</span> <span class="mf">0.09999999999999964</span>

<span class="nb">require</span> <span class="s2">"bigdecimal"</span>

<span class="n">a</span> <span class="o">=</span> <span class="no">BigDecimal</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"7.3"</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="no">BigDecimal</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"7.2"</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">a</span><span class="o">-</span><span class="n">b</span> 

<span class="o">=&gt;</span> <span class="mf">0.1</span><span class="no">E0</span>

</code></pre></div></div>

<h3 id="expression"> è¡¨è¾¾å¼ </h3>

<ul>
  <li>!</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span><span class="mi">20</span>
<span class="n">c</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">if</span> <span class="n">a</span><span class="o">==</span><span class="n">b</span>
  <span class="n">c</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">elsif</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span>
  <span class="n">c</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> 
<span class="k">end</span>

</code></pre></div></div>

<ul>
  <li>eql? :æ£€æµ‹ç±»å‹å’Œå€¼</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">c</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="nf">eql?</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">r</span> <span class="c1">#true</span>
<span class="n">d</span> <span class="o">=</span> <span class="mf">10.0</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="nf">eql?</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">r</span> <span class="c1">#false</span>


</code></pre></div></div>

<ul>
  <li>&lt;=&gt;ï¼š</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>x&lt;=&gt;y
</code></pre></div></div>
<p>x&gt;y åˆ™è¿”å›1 ï¼Œ x&lt;yåˆ™è¿”å›-1 ï¼Œ x=yåˆ™è¿”å›0</p>

<h3 id="string"> å­—ç¬¦ä¸² </h3>

<ul>
  <li>æ‹¼æ¥:</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 <span class="c1">#ä½¿ç”¨+å·</span>
<span class="n">x</span> <span class="o">=</span> <span class="s2">"a"</span>
<span class="n">y</span> <span class="o">=</span> <span class="s2">"b"</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span>

 <span class="c1">#ä½¿ç”¨&lt;&lt;å·</span>
<span class="n">c</span> <span class="o">=</span> <span class="s2">"a"</span><span class="o">&lt;&lt;</span><span class="s2">" "</span><span class="o">&lt;&lt;</span><span class="no">"b"</span><span class="sh">

</span></code></pre></div></div>

<ul>
  <li>inspectï¼šæŸ¥çœ‹å­—ç¬¦ä¸²</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">string</span> <span class="o">=</span> <span class="s2">"  Hello world"</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">string</span><span class="p">.</span><span class="nf">inspect</span>
<span class="nb">puts</span> <span class="n">d</span>
<span class="o">=&gt;</span> <span class="s2">"</span><span class="se">\"</span><span class="s2">  Hello world</span><span class="se">\"</span><span class="s2">"</span>

</code></pre></div></div>

<ul>
  <li>chop:ç æ‰æœ«å°¾å­—ç¬¦</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">string</span> <span class="o">=</span> <span class="s2">"  Hello world"</span>
<span class="n">e</span> <span class="o">=</span> <span class="n">string</span><span class="p">.</span><span class="nf">chop</span>
<span class="nb">puts</span> <span class="n">e</span>
<span class="o">=&gt;</span> <span class="s2">"  Hello worl"</span>

</code></pre></div></div>

<ul>
  <li>include? :åŒ…å«substring</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">b</span> <span class="o">=</span> <span class="n">string</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="s2">"Hello"</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">b</span>

</code></pre></div></div>

<ul>
  <li>è½¬ä¹‰ç¬¦å·:</li>
</ul>

<p>\n, \tï¼štab , \b : åˆ é™¤ , \v æ¢è¡Œ+tab</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 <span class="c1">##å­—ç¬¦ä¸²ä¸­çš„å¼•å·ï¼ŒåŒå¼•å·å¯è¢«#{}è§£æ</span>
<span class="nb">puts</span> <span class="s2">"Hello </span><span class="se">\"</span><span class="s2"> world </span><span class="se">\"</span><span class="s2"> "</span> 
<span class="o">=&gt;</span> <span class="no">Hello</span> <span class="s2">" world "</span> 

 <span class="c1">##ä½¿ç”¨å•å¼•å·ï¼Œä¸ä¼šè¢«#{}è§£æ</span>
<span class="nb">puts</span> <span class="s1">'Hello "world"'</span>
<span class="o">=&gt;</span> <span class="no">Hello</span> <span class="s2">"world"</span> 

 <span class="c1">##å­—ç¬¦ä¸²ä¸­çš„\</span>
<span class="nb">puts</span> <span class="s2">"Hello </span><span class="se">\\</span><span class="s2"> world"</span>
<span class="o">=&gt;</span><span class="no">Hello</span> <span class="p">\</span> <span class="n">world</span>

</code></pre></div></div>

<ul>
  <li>ä½¿ç”¨æ ‡è®°æ¥çº¦å®šå­—ç¬¦ä¸²çš„å¼€å§‹å’Œç»“æŸï¼šÂ«ID xxxxx ID</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">x</span> <span class="o">=</span> <span class="o">&lt;&lt;</span><span class="no">JAYSON_</span><span class="sh">
this is some
thing
else,haha
</span><span class="no">JAYSON_</span>

<span class="nb">puts</span> <span class="n">x</span>

</code></pre></div></div>

<ul>
  <li>é‡å¤å­—ç¬¦ä¸²</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">x</span> <span class="o">=</span> <span class="s2">"b"</span><span class="o">*</span><span class="mi">5</span>
<span class="nb">puts</span> <span class="n">x</span>

</code></pre></div></div>

<ul>
  <li>æ ¼å¼åŒ–ï¼š#{}</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">20</span>
<span class="nb">puts</span> <span class="s2">"</span><span class="si">#{</span><span class="n">x</span><span class="si">}</span><span class="s2"> + </span><span class="si">#{</span><span class="n">y</span><span class="si">}</span><span class="s2"> = </span><span class="si">#{</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="si">}</span><span class="s2">"</span>

</code></pre></div></div>

<ul>
  <li>æ ¼å¼åŒ–ï¼šä½¿ç”¨sprintf</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">r</span> <span class="o">=</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="c1">#0-100å†…çš„éšæœºæ•°</span>
<span class="n">str</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">"%.1f"</span><span class="p">,</span><span class="n">r</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">str</span><span class="p">.</span><span class="nf">inspect</span>

</code></pre></div></div>

<ul>
  <li>%q{}ä¸ä¼šè¢«#{}è§£æ</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">x</span> <span class="o">=</span> <span class="sx">%q{ this is some
thing 
else,haha}</span>

<span class="o">=&gt;</span> <span class="s2">" this is some</span><span class="se">\n</span><span class="s2">thing </span><span class="se">\n</span><span class="s2">else,haha"</span>

</code></pre></div></div>

<ul>
  <li>%{} ä¼šè¢«#{}è§£æ</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nb">name</span> <span class="o">=</span> <span class="sx">%{Jason}</span>

</code></pre></div></div>

<ul>
  <li>%w{}å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ•°ç»„</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">strlist2</span> <span class="o">=</span> <span class="sx">%w{dog monkey pigg cock}</span> <span class="c1">##å°†å…ƒç´ è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ•°ç»„</span>
<span class="nb">puts</span> <span class="n">strlist2</span><span class="p">.</span><span class="nf">inspect</span>

</code></pre></div></div>

<ul>
  <li>æ›¿æ¢substring</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="s2">"foobar"</span>

 <span class="c1">#subæ–¹æ³•åªå°†ç¬¬ä¸€ä¸ªbarå˜æˆboo</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="s1">'bar'</span><span class="p">,</span><span class="s1">'boo'</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">y</span>

<span class="n">x</span> <span class="o">=</span> <span class="s2">"foobarxoobar,ioo="</span>

 <span class="c1">#gsubæ–¹æ³•å°†æ‰€æœ‰baréƒ½å˜æˆboo</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="s1">'bar'</span><span class="p">,</span><span class="s1">'boo'</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">y</span>  
 
</code></pre></div></div>
<ul>
  <li>æ­£åˆ™è¡¨è¾¾å¼ä»¥/xxx/è¡¨ç¤º</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 <span class="c1">#å°†å‰ä¸¤ä¸ªå­—ç¬¦æ›¿æ¢æˆHello</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sr">/^../</span><span class="p">,</span><span class="s1">'Hello'</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">y</span>

 <span class="c1">#å°†åä¸¤ä¸ªå­—ç¬¦æ›¿æ¢ä¸ºHello</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sr">/..$/</span><span class="p">,</span><span class="s1">'Hello'</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">y</span>

 <span class="c1">#x.each{|i| puts i} #--wrong!</span>
 <span class="c1">#éœ€è¦ä½¿ç”¨scan</span>
<span class="n">x</span><span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/./</span><span class="p">){</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">i</span><span class="p">}</span> <span class="c1">#--Right!</span>

 <span class="c1">#scançš„å‚æ•°ä¸ºæ­£åˆ™è¡¨è¾¾å¼</span>
<span class="n">x</span> <span class="o">=</span> <span class="s2">"this is something I will never do"</span>
<span class="n">x</span><span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w\w/</span><span class="p">){</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">i</span><span class="p">}</span>

 <span class="c1">#\wçš„æ„æ€æ˜¯åŒ¹é…æ•°å­—,å­—æ¯ä¸‹,åˆ’çº¿ï¼Œå¯¹æ¯ä¸ªå­—ç¬¦è¿›è¡ŒåŒ¹é… </span>
 <span class="c1"># \w\w æ˜¯å¯¹ä¸¤ä¸ªå­—ç¬¦è¿›è¡ŒåŒ¹é…</span>
<span class="n">x</span><span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">){</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">i</span><span class="p">}</span>

 <span class="c1">###.scanæ–¹æ³•å®é™…ä¸Šè¿”å›çš„æ—¶æ•°ç»„</span>
<span class="nb">p</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span>
<span class="nb">puts</span> <span class="s2">"-----"</span>
<span class="nb">puts</span> <span class="nb">p</span><span class="p">.</span><span class="nf">class</span>  <span class="c1">#array</span>
<span class="nb">puts</span> <span class="s2">"-----"</span>
<span class="nb">puts</span> <span class="nb">p</span>
<span class="nb">puts</span> <span class="s2">"-----"</span>
 <span class="c1">#\w+ ï¼š+çš„æ„æ€æ˜¯ä¸€ç›´å‘ååŒ¹é…ï¼Œç›´åˆ°é‡è§éæ•°å­—ï¼Œå­—æ¯ï¼Œä¸‹åˆ’çº¿</span>

<span class="n">x</span> <span class="o">=</span> <span class="s2">"I spent 100 dollars on this machine which is now 200 dollars"</span>
<span class="n">x</span><span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/\d+/</span><span class="p">){</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">i</span><span class="p">}</span>
 <span class="c1">#åŒ¹é…å‡ºæ•°å­—</span>

 <span class="c1">#åŒ¹é…å­—ç¬¦é›†[....]åŒ¹é…[]ä¸­çš„å­—ç¬¦é›†</span>
<span class="n">x</span> <span class="o">=</span> <span class="s2">"this is a test"</span>
<span class="n">x</span><span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/[aeiou]/</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">i</span><span class="p">}</span>
<span class="n">x</span><span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/[a-m]/</span><span class="p">){</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">i</span><span class="p">}</span>

</code></pre></div></div>

<ul>
  <li>è®¿é—®char</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">x</span> <span class="o">=</span> <span class="s2">"abc"</span>
<span class="nb">puts</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

</code></pre></div></div>

<ul>
  <li>charçš„index</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">string</span><span class="p">.</span><span class="nf">index</span><span class="p">(</span><span class="s2">"a"</span><span class="p">)</span> <span class="c1">##1</span>

</code></pre></div></div>

<ul>
  <li>å­—ç¬¦ä¸²åŒ¹é…</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 <span class="c1">#ï¼ˆ1ï¼‰æ ¹æ®æ­£åˆ™åŒ¹é…ï¼š</span>
 <span class="c1">#æ£€æµ‹å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«æŸå­—ç¬¦: ä½¿ç”¨=~</span>
 <span class="c1">#æ£€æµ‹å­—ç¬¦ä¸²ä¸­ä¸åŒ…å«æŸå­—ç¬¦: ä½¿ç”¨!~</span>
<span class="nb">puts</span> <span class="s2">"get string"</span> <span class="k">if</span> <span class="s2">"jayson loves basketball"</span> <span class="o">=~</span> <span class="sr">/[basketball]/</span>
<span class="nb">puts</span> <span class="s2">"String contains no digits"</span> <span class="k">unless</span> <span class="s2">"jayson loves basketball"</span> <span class="o">=~</span> <span class="sr">/[0-9]/</span>


 <span class="c1">#ï¼ˆ2ï¼‰ä½¿ç”¨matchæ–¹æ³•</span>
<span class="nb">puts</span> <span class="s2">"String has matched"</span> <span class="k">if</span> <span class="s2">"jayson loves basketball"</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="s2">"loves"</span><span class="p">)</span>

</code></pre></div></div>

<ul>
  <li>å…¶å®ƒ</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 <span class="c1">#reverse</span>
<span class="n">string</span> <span class="o">=</span> <span class="n">string</span><span class="p">.</span><span class="nf">reverse</span><span class="p">()</span>
<span class="nb">puts</span> <span class="n">string</span>

 <span class="c1">#upercase</span>
<span class="n">string</span> <span class="o">=</span> <span class="n">string</span><span class="p">.</span><span class="nf">upcase</span><span class="p">()</span>
<span class="nb">puts</span> <span class="n">string</span>

 <span class="c1">#lowercase</span>
<span class="n">string</span> <span class="o">=</span> <span class="n">string</span><span class="p">.</span><span class="nf">downcase</span><span class="p">()</span>
<span class="nb">puts</span> <span class="n">string</span>

 <span class="c1">#swap</span>
<span class="n">string</span> <span class="o">=</span> <span class="n">string</span><span class="p">.</span><span class="nf">swapcase</span><span class="p">()</span>
<span class="nb">puts</span> <span class="n">string</span>

 <span class="c1">#length</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">string</span><span class="p">.</span><span class="nf">length</span>
<span class="nb">puts</span> <span class="n">l</span>

 <span class="c1">#size == length</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">string</span><span class="p">.</span><span class="nf">size</span>
<span class="nb">puts</span> <span class="n">s</span>

 <span class="c1">#split</span>
<span class="n">string</span> <span class="o">=</span> <span class="s2">"hello world"</span>
<span class="n">list</span> <span class="o">=</span> <span class="n">string</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s2">" "</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">list</span><span class="p">.</span><span class="nf">inspect</span>

 <span class="c1">#concat</span>
<span class="n">string</span><span class="p">.</span><span class="nf">concat</span><span class="p">(</span><span class="s2">"another string"</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">string</span>

</code></pre></div></div>

<h3 id="control-flow">æ§åˆ¶æµ</h3>

<ul>
  <li>if</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 <span class="c1">##å•è¡Œåˆ¤æ–­</span>
<span class="nb">puts</span> <span class="s2">"a&gt;10"</span> <span class="k">if</span> <span class="n">a</span><span class="o">&gt;</span><span class="mi">10</span>

 <span class="c1">#if-elsif-else</span>
<span class="k">if</span> <span class="n">a</span><span class="o">&lt;</span><span class="mi">10</span>
  <span class="nb">puts</span> <span class="s2">"a&lt;10"</span>
<span class="k">elsif</span>
  <span class="nb">puts</span> <span class="s2">"a=10"</span>
<span class="k">else</span>
  <span class="nb">puts</span> <span class="s2">"a&gt;10"</span>
<span class="k">end</span>

</code></pre></div></div>

<ul>
  <li>unless</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">unless</span> <span class="n">a</span><span class="o">&gt;</span><span class="mi">10</span> 
  <span class="nb">puts</span> <span class="s2">"a&gt;10"</span>
<span class="k">end</span>

</code></pre></div></div>

<ul>
  <li>ä¸‰å…ƒæ“ä½œ</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">type</span> <span class="o">=</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="p">?</span> <span class="s2">"1"</span> <span class="p">:</span> <span class="s2">"2"</span>
<span class="nb">puts</span> <span class="n">type</span>

</code></pre></div></div>

<ul>
  <li>case-when</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">fruit</span> <span class="o">=</span> <span class="s2">"orange"</span>

<span class="k">case</span> <span class="n">fruit</span>
<span class="k">when</span> <span class="s2">"orange"</span>
  <span class="n">color</span> <span class="o">=</span> <span class="s2">"orange"</span>
<span class="k">when</span> <span class="s2">"apple"</span>
  <span class="n">color</span> <span class="o">=</span> <span class="s2">"red"</span>
<span class="k">when</span> <span class="s2">"banana"</span>
  <span class="n">color</span> <span class="o">=</span> <span class="s2">"yellow"</span>
<span class="k">else</span>
  <span class="n">color</span> <span class="o">=</span> <span class="s2">"unknown"</span>
<span class="k">end</span>

</code></pre></div></div>

<ul>
  <li>while</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>

<span class="k">while</span><span class="p">(</span><span class="n">x</span><span class="o">&gt;=</span><span class="mi">1</span><span class="p">)</span>
  <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="mi">2</span>
  <span class="nb">puts</span> <span class="n">x</span>
<span class="k">end</span>

 <span class="c1">#å•è¡Œ</span>
<span class="n">x</span><span class="o">=</span><span class="mi">10</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="mi">2</span> <span class="k">while</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">1</span> 
<span class="nb">puts</span> <span class="n">x</span>

</code></pre></div></div>

<ul>
  <li>until</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>

<span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>

<span class="k">until</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">1</span>
  <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="mi">2</span>
  <span class="nb">puts</span> <span class="n">x</span>
<span class="k">end</span>

 <span class="c1">#å•è¡Œ</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="mi">2</span> <span class="k">until</span> <span class="n">x</span><span class="o">&lt;</span><span class="mi">1</span> 
<span class="nb">puts</span> <span class="n">x</span>

</code></pre></div></div>

<ul>
  <li>loops</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">array</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">array</span> <span class="k">do</span>
  <span class="nb">puts</span> <span class="s2">"i is </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>

<span class="n">strlist1</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"a"</span><span class="p">,</span><span class="s2">"b"</span><span class="p">,</span><span class="s2">"c"</span><span class="p">]</span>
<span class="nb">puts</span> <span class="n">strlist1</span><span class="p">.</span><span class="nf">inspect</span>

<span class="n">strlist2</span> <span class="o">=</span> <span class="sx">%w{dog monkey pigg cock}</span> <span class="c1">##å°†å…ƒç´ è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ•°ç»„</span>
<span class="nb">puts</span> <span class="n">strlist2</span><span class="p">.</span><span class="nf">inspect</span>

<span class="k">for</span> <span class="n">animal</span> <span class="k">in</span> <span class="n">strlist2</span> <span class="k">do</span>
  <span class="k">next</span> <span class="k">if</span> <span class="n">animal</span> <span class="o">==</span> <span class="s2">"monkey"</span> <span class="c1">##continue</span>
  <span class="nb">puts</span> <span class="s2">"</span><span class="si">#{</span><span class="n">animal</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>


</code></pre></div></div>

<h3 id="symbol">Symbol</h3>

<p>symbolæ˜¯æ— å€¼å¸¸é‡ï¼Œå…¨å±€å”¯ä¸€ï¼ŒRubyç‰¹æ€§</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">hello</span> <span class="o">=</span> <span class="ss">:key</span>
<span class="nb">puts</span> <span class="s2">"equal"</span> <span class="k">if</span> <span class="n">hello</span> <span class="o">==</span> <span class="ss">:key</span> <span class="c1">#equal</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">{</span><span class="ss">:key</span> <span class="o">=&gt;</span> <span class="s2">"hh"</span><span class="p">}</span>
<span class="nb">puts</span> <span class="n">a</span><span class="p">[</span><span class="ss">:key</span><span class="p">]</span> <span class="c1">## hh</span>

 <span class="c1">#symbol:åœ¨å†…å­˜ä¸­åªåˆ›å»ºä¸€æ¬¡</span>
<span class="n">treehouse</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'name'</span><span class="o">=&gt;</span><span class="s1">'Treehouse'</span><span class="p">,</span><span class="s1">'location'</span> <span class="o">=&gt;</span> <span class="s1">'Treehourse Island'</span><span class="p">}</span>
 
 <span class="c1">#å¦‚æœå†åˆ›å»ºä¸€ä¸ªtreehouseï¼Œé‚£ä¹ˆæ‰€æœ‰çš„keyéƒ½è¦é‡æ–°åˆ›å»ºä¸€é</span>
 <span class="c1">#å¦‚æœä½¿ç”¨symbolï¼Œkeyä¸ä¼šé‡æ–°åˆ›å»º</span>
<span class="n">treehouse</span> <span class="o">=</span> <span class="p">{</span><span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s1">'Treehouse'</span><span class="p">,</span> <span class="ss">:location</span> <span class="o">=&gt;</span> <span class="s1">'Treehouse Island'</span><span class="p">}</span>

</code></pre></div></div>

<h3 id="array">Array</h3>

<ul>
  <li>æ•°ç»„ä¸ªæ•°</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">a</span> <span class="o">=</span> <span class="nb">p</span><span class="p">.</span><span class="nf">count</span>

</code></pre></div></div>

<ul>
  <li>æ¸…ç©º</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">a</span><span class="p">.</span><span class="nf">clear</span>

</code></pre></div></div>

<ul>
  <li>æ•°ç»„ç´¢å¼•</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nb">puts</span> <span class="n">x</span><span class="p">.</span><span class="nf">first</span>
<span class="nb">puts</span> <span class="n">x</span><span class="p">.</span><span class="nf">last</span>

<span class="nb">puts</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">puts</span> <span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c1">##æœ€åä¸€ä¸ª</span>

<span class="nb">puts</span> <span class="n">x</span><span class="p">.</span><span class="nf">first</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1">##å‰ä¸¤ä¸ª</span>
<span class="nb">puts</span> <span class="n">x</span><span class="p">.</span><span class="nf">at</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>


</code></pre></div></div>
<ul>
  <li>æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„ç±»å‹å¯ä»¥ä¸åŒ</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="s2">"2"</span><span class="p">,</span><span class="mf">3.0</span><span class="p">]</span>
</code></pre></div></div>
<ul>
  <li>åè½¬</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">x</span><span class="p">.</span><span class="nf">reverse</span><span class="p">()</span>

</code></pre></div></div>

<ul>
  <li>æ•°ç»„éå†</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">#ä½¿ç”¨do-each</span>
<span class="n">q</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="n">i</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>

<span class="c1">#ä½¿ç”¨do-each with index</span>
<span class="n">q</span><span class="p">.</span><span class="nf">each_with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">item</span><span class="p">,</span> <span class="n">index</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="s2">"current_index: </span><span class="si">#{</span><span class="n">index</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>


 <span class="c1">#ä½¿ç”¨block</span>
<span class="n">q</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span> 
  <span class="nb">puts</span> <span class="n">i</span><span class="p">.</span><span class="nf">to_s</span> <span class="o">+</span> <span class="s2">"x"</span>
<span class="p">}</span>

 <span class="c1">#ä½¿ç”¨collect</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">].</span><span class="nf">collect</span><span class="p">{</span><span class="o">|</span><span class="n">element</span><span class="o">|</span> <span class="n">element</span><span class="o">*</span><span class="mi">2</span><span class="p">}</span>

</code></pre></div></div>

<ul>
  <li>æ•°ç»„åŒ…å«æŸä¸ªå…ƒç´ </li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="nb">puts</span> <span class="n">x</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="s2">"x"</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">x</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

</code></pre></div></div>

<ul>
  <li>æ•°ç»„çš„pushæ“ä½œ</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s2">"wrod"</span>
<span class="n">x</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="s2">"word"</span><span class="p">)</span>

<span class="n">x</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>

</code></pre></div></div>
<ul>
  <li>æ•°ç»„çš„popæ“ä½œ</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span><span class="p">.</span><span class="nf">pop</span>

</code></pre></div></div>

<ul>
  <li>æ•°ç»„çš„joinæ“ä½œ:</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 <span class="c1">#å¦‚æœä¸€ä¸ªæ•°ç»„å…¨æ˜¯å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨.joinæ–¹æ³•ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ è¿æ¥èµ·æ¥</span>

<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"jj"</span><span class="p">,</span><span class="s2">"ss"</span><span class="p">,</span><span class="s2">"gg"</span><span class="p">]</span>
<span class="nb">puts</span> <span class="n">x</span><span class="p">.</span><span class="nf">join</span><span class="p">()</span>

<span class="o">=&gt;</span> <span class="n">jjssgg</span>

<span class="nb">puts</span> <span class="n">x</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s1">', '</span><span class="p">)</span>

<span class="o">=&gt;</span> <span class="n">jj</span><span class="p">,</span> <span class="n">ss</span><span class="p">,</span> <span class="n">gg</span>

</code></pre></div></div>

<ul>
  <li>å­—ç¬¦ä¸²æŒ‰ç¬¦å·åˆ†å‰²:</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">x</span> <span class="o">=</span> <span class="s2">"short sentence; Another; no more"</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s1">';'</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">q</span><span class="p">.</span><span class="nf">class</span> 
<span class="o">=&gt;</span> <span class="n">array</span>

<span class="nb">puts</span> <span class="n">q</span>
<span class="o">=&gt;</span> <span class="n">short</span> <span class="n">sentence</span> <span class="no">Another</span> <span class="n">no</span> <span class="n">more</span>
</code></pre></div></div>

<p>ä½¿ç”¨inspectæ–¹æ³•ä½¿è¾“å‡ºæ ¼å¼æ›´æ˜“è¯»ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½æœ‰inspectæ–¹æ³•:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">x</span> <span class="o">=</span> <span class="s2">"short sentence; Another; no more"</span>
<span class="nb">p</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s1">';'</span><span class="p">).</span><span class="nf">inspect</span> 

<span class="nb">puts</span> <span class="nb">p</span>  
<span class="o">=&gt;</span><span class="p">[</span><span class="s2">"short sentence"</span><span class="p">,</span> <span class="s2">" Another"</span><span class="p">,</span> <span class="s2">" no more"</span><span class="p">]</span>

</code></pre></div></div>

<ul>
  <li>æ•°ç»„ç›¸åŠ :</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">p</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">q</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"1"</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s2">"33"</span><span class="p">]</span>  
<span class="n">z</span> <span class="o">=</span> <span class="nb">p</span><span class="o">+</span><span class="n">q</span>
<span class="nb">print</span> <span class="n">z</span>

<span class="o">=&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">"1"</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">"33"</span><span class="p">]</span>

</code></pre></div></div>

<ul>
  <li>æ•°ç»„ç›¸å‡:</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 <span class="c1">#ä¸¤ä¸ªæ•°ç»„ç›¸å‡</span>
<span class="nb">p</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">q</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
<span class="n">z</span> <span class="o">=</span> <span class="nb">p</span><span class="o">-</span><span class="n">q</span>
<span class="nb">print</span> <span class="n">z</span> 

<span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span>

</code></pre></div></div>

<ul>
  <li>slice: å–æ•°ç»„çš„æŸäº›å€¼ï¼Œç»„æˆä¸€ä¸ªæ–°æ•°ç»„, å‚æ•°ä¸ºindexå€¼ï¼Œä¸ä¿®æ”¹åŸarray</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">list1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">ele</span> <span class="o">=</span> <span class="n">list1</span><span class="p">.</span><span class="nf">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="nb">puts</span> <span class="n">ele</span><span class="p">.</span><span class="nf">inspect</span> <span class="c1">#[2]</span>
<span class="n">slice</span> <span class="o">=</span> <span class="n">list1</span><span class="p">.</span><span class="nf">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="p">;</span> <span class="nb">puts</span> <span class="n">slice</span><span class="p">.</span><span class="nf">inspect</span> <span class="c1">#[2,3]</span>

</code></pre></div></div>

<ul>
  <li>slice! :å–æ•°ç»„çš„æŸäº›å€¼ï¼Œç»„æˆä¸€ä¸ªæ–°æ•°ç»„, å‚æ•°ä¸ºindexå€¼ï¼Œä¿®æ”¹åŸarray</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">slice</span> <span class="o">=</span> <span class="n">list1</span><span class="p">.</span><span class="nf">slice!</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="p">;</span> <span class="nb">puts</span> <span class="n">list1</span><span class="p">.</span><span class="nf">inspect</span> <span class="c1">#[1]</span>

</code></pre></div></div>

<ul>
  <li>unshift :åœ¨å¤´éƒ¨æ’å…¥å…ƒç´ </li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="n">a</span><span class="p">.</span><span class="nf">unshift</span> <span class="mi">2</span>

<span class="o">=&gt;</span>  <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

</code></pre></div></div>

<ul>
  <li>rindex :è¿”å›æ•°ç»„å…ƒç´ çš„index</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="s2">"a"</span><span class="p">,</span><span class="s2">"s"</span><span class="p">]</span>
<span class="n">a</span><span class="p">.</span><span class="nf">rindex</span> <span class="s2">"a"</span>

<span class="o">=&gt;</span> <span class="mi">3</span>

</code></pre></div></div>

<ul>
  <li>å¤šç»´æ•°ç»„</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">array</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">array</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="nf">push</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="nb">puts</span> <span class="n">array</span><span class="p">.</span><span class="nf">inspect</span> 
<span class="o">=&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>

 <span class="c1">#å±•æˆ1ç»´æ•°ç»„</span>
<span class="n">array</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="nf">flatten</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

</code></pre></div></div>

<ul>
  <li>sort &amp; compare</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">array</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">9</span><span class="p">]</span>
<span class="n">array1</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="nf">sort</span> <span class="p">;</span> <span class="nb">puts</span> <span class="n">array1</span><span class="p">.</span><span class="nf">inspect</span><span class="p">()</span>
<span class="n">array1</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="nf">sort</span><span class="p">{</span><span class="o">|</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="o">|</span> <span class="n">a</span><span class="o">&lt;=&gt;</span><span class="n">b</span><span class="p">}</span> <span class="p">;</span> <span class="nb">puts</span> <span class="n">array1</span><span class="p">.</span><span class="nf">inspect</span><span class="p">()</span>
<span class="n">array1</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="nf">sort</span><span class="p">{</span><span class="o">|</span><span class="n">b</span><span class="p">,</span><span class="n">a</span><span class="o">|</span> <span class="n">a</span><span class="o">&lt;=&gt;</span><span class="n">b</span><span class="p">}.</span><span class="nf">reverse</span> <span class="p">;</span> <span class="nb">puts</span> <span class="n">array1</span><span class="p">.</span><span class="nf">inspect</span><span class="p">()</span>
<span class="n">array1</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="nf">sort</span><span class="p">{</span><span class="o">|</span><span class="n">b</span><span class="p">,</span><span class="n">a</span><span class="o">|</span> <span class="n">a</span><span class="o">&lt;=&gt;</span><span class="n">b</span><span class="p">}.</span><span class="nf">reverse</span><span class="p">.</span><span class="nf">uniq</span> <span class="p">;</span> <span class="nb">puts</span> <span class="n">array1</span><span class="p">.</span><span class="nf">inspect</span><span class="p">()</span> <span class="c1">##uniqå»é‡</span>

</code></pre></div></div>

<ul>
  <li>any? all?</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">array</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">9</span><span class="p">]</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="nf">any?</span><span class="p">{</span><span class="o">|</span><span class="n">e</span><span class="o">|</span> <span class="n">e</span><span class="o">&gt;</span><span class="mi">3</span><span class="p">}</span> <span class="p">;</span> <span class="nb">puts</span> <span class="n">ret</span><span class="p">.</span><span class="nf">inspect</span><span class="p">()</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="nf">all?</span><span class="p">{</span><span class="o">|</span><span class="n">e</span><span class="o">|</span> <span class="n">e</span><span class="o">&gt;</span><span class="mi">3</span><span class="p">}</span> <span class="p">;</span> <span class="nb">puts</span> <span class="n">ret</span><span class="p">.</span><span class="nf">inspect</span><span class="p">()</span>

</code></pre></div></div>

<ul>
  <li>select :é€‰å‡ºç¬¦åˆæ¡ä»¶çš„å…ƒç´ </li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">newArray</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="nf">select</span><span class="p">{</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span> <span class="n">e</span><span class="o">&gt;</span><span class="mi">3</span><span class="p">};</span> <span class="nb">puts</span> <span class="n">newArray</span><span class="p">.</span><span class="nf">inspect</span><span class="p">()</span>
</code></pre></div></div>

<ul>
  <li>reject :å»é™¤ç¬¦åˆæ¡ä»¶çš„å…ƒç´ </li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">newArray</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="nf">reject</span><span class="p">{</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span> <span class="n">e</span><span class="o">&gt;</span><span class="mi">3</span><span class="p">};</span> <span class="nb">puts</span> <span class="n">newArray</span><span class="p">.</span><span class="nf">inspect</span><span class="p">()</span>
</code></pre></div></div>

<ul>
  <li>mapï¼š</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">newArray</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="nf">map</span><span class="p">{</span><span class="o">|</span><span class="n">e</span><span class="o">|</span> <span class="n">e</span><span class="o">*</span><span class="mi">2</span> <span class="p">};</span> <span class="nb">puts</span> <span class="n">newArray</span><span class="p">.</span><span class="nf">inspect</span><span class="p">()</span>
</code></pre></div></div>

<h3 id="hash">Hash</h3>

<ul>
  <li>åˆ›å»º</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">h</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span><span class="p">()</span> <span class="p">;</span> <span class="nb">puts</span> <span class="n">h</span><span class="p">.</span><span class="nf">inspect</span><span class="p">()</span>
<span class="n">h</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"hello"</span> <span class="o">=&gt;</span> <span class="s2">"world"</span><span class="p">}</span>
<span class="n">h</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span><span class="p">{</span><span class="o">|</span><span class="nb">hash</span><span class="p">,</span><span class="n">key</span><span class="o">|</span> <span class="nb">hash</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Default value for </span><span class="si">#{</span><span class="n">key</span><span class="si">}</span><span class="s2">"</span><span class="p">}</span>

</code></pre></div></div>

<ul>
  <li>æ¸…ç©º</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">h</span><span class="p">.</span><span class="nf">clear</span><span class="p">;</span><span class="nb">puts</span> <span class="n">h</span><span class="p">.</span><span class="nf">empty?</span>

</code></pre></div></div>

<ul>
  <li>ä¸ªæ•°</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">map</span><span class="p">.</span><span class="nf">size</span>

</code></pre></div></div>

<ul>
  <li>è®¿é—®</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">map</span><span class="p">[</span><span class="s1">'cat'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'boss'</span>

</code></pre></div></div>

<ul>
  <li>éå†</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">map</span><span class="p">.</span><span class="nf">each</span><span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span>
	
	<span class="nb">puts</span> <span class="s2">"</span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2"> =&gt; </span><span class="si">#{</span><span class="n">v</span><span class="si">}</span><span class="s2">"</span>
<span class="p">}</span>


<span class="n">h</span><span class="p">.</span><span class="nf">each_pair</span> <span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> 
	
	<span class="nb">puts</span> <span class="s2">"the key at </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2"> is </span><span class="si">#{</span><span class="n">v</span><span class="si">}</span><span class="s2">"</span>
	
<span class="p">}</span>

<span class="n">h</span><span class="p">.</span><span class="nf">each_key</span><span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="o">|</span> 
	<span class="nb">puts</span> <span class="s2">"the key is </span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">"</span>
	
<span class="p">}</span>

<span class="n">h</span><span class="p">.</span><span class="nf">each_value</span><span class="p">{</span><span class="o">|</span><span class="n">v</span><span class="o">|</span> 
	<span class="nb">puts</span> <span class="s2">"the value is </span><span class="si">#{</span><span class="n">v</span><span class="si">}</span><span class="s2">"</span>

<span class="p">}</span>

<span class="n">h</span><span class="p">.</span><span class="nf">select</span><span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="n">k</span> <span class="o">==</span> <span class="s2">"501"</span><span class="p">};</span><span class="nb">puts</span> <span class="n">h</span><span class="p">.</span><span class="nf">inspect</span>

<span class="n">h</span><span class="p">.</span><span class="nf">keep_if</span><span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="n">k</span> <span class="o">==</span> <span class="s2">"502"</span><span class="p">};</span> <span class="nb">puts</span> <span class="n">h</span><span class="p">.</span><span class="nf">inspect</span>


</code></pre></div></div>

<ul>
  <li>åˆ é™¤</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">map</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="s1">'cat'</span><span class="p">)</span>
<span class="n">map</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">map</span><span class="p">.</span><span class="nf">delete_if</span> <span class="p">{</span><span class="o">|</span><span class="n">key</span><span class="p">,</span><span class="n">value</span><span class="o">|</span> <span class="n">key</span> <span class="o">==</span><span class="s2">"some key"</span><span class="p">}</span>

</code></pre></div></div>

<ul>
  <li>æ‰€æœ‰keys/values</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">map</span><span class="p">.</span><span class="nf">keys</span>
<span class="n">map</span><span class="p">.</span><span class="nf">values</span>

</code></pre></div></div>

<ul>
  <li>key/valueå­˜åœ¨?</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nb">puts</span> <span class="n">h</span><span class="p">.</span><span class="nf">has_key?</span><span class="p">(</span><span class="s2">"candy"</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">h</span><span class="p">.</span><span class="nf">has_value?</span><span class="p">(</span><span class="s2">"candy"</span><span class="p">)</span>

</code></pre></div></div>

<ul>
  <li>to array</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">h</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"501"</span> <span class="o">=&gt;</span> <span class="s2">"cctv1"</span><span class="p">,</span> <span class="s2">"502"</span> <span class="o">=&gt;</span> <span class="s2">"cctv2"</span><span class="p">,</span> <span class="s2">"503"</span> <span class="o">=&gt;</span> <span class="s2">"cctv3"</span><span class="p">}</span>
<span class="nb">puts</span> <span class="n">h</span><span class="p">.</span><span class="nf">to_a</span><span class="p">.</span><span class="nf">inspect</span>

<span class="o">=&gt;</span><span class="p">[[</span><span class="s2">"501"</span><span class="p">,</span> <span class="s2">"cctv1"</span><span class="p">],</span> <span class="p">[</span><span class="s2">"502"</span><span class="p">,</span> <span class="s2">"cctv2"</span><span class="p">],</span> <span class="p">[</span><span class="s2">"503"</span><span class="p">,</span> <span class="s2">"cctv3"</span><span class="p">]]</span>

</code></pre></div></div>

<ul>
  <li>find</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">h</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"501"</span> <span class="o">=&gt;</span> <span class="s2">"cctv1"</span><span class="p">,</span> <span class="s2">"502"</span> <span class="o">=&gt;</span> <span class="s2">"cctv2"</span><span class="p">,</span> <span class="s2">"503"</span> <span class="o">=&gt;</span> <span class="s2">"cctv3"</span><span class="p">}</span>
<span class="nb">puts</span> <span class="n">h</span><span class="p">.</span><span class="nf">find</span><span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="n">k</span> <span class="o">==</span> <span class="s2">"503"</span><span class="p">}.</span><span class="nf">inspect</span><span class="p">;</span>  <span class="c1">##["503","cctv3"]è¿”å›æ•°ç»„</span>
<span class="nb">puts</span> <span class="n">h</span><span class="p">.</span><span class="nf">find_all</span><span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="n">v</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="s2">"cc"</span><span class="p">)}.</span><span class="nf">inspect</span> 
<span class="nb">puts</span> <span class="n">h</span><span class="p">.</span><span class="nf">all?</span><span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="n">v</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="s2">"cctv1"</span><span class="p">)}</span>
<span class="nb">puts</span> <span class="n">h</span><span class="p">.</span><span class="nf">any?</span><span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="n">v</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="s2">"cctv1"</span><span class="p">)}</span>

</code></pre></div></div>

<ul>
  <li>map</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>puts h.map{|k,v| v += "ss"}.inspect #å°†valueçš„å€¼æ˜ å°„ä¸º#["cctv1ss","cctv2ss","cctv3ss"]

</code></pre></div></div>

<ul>
  <li>reject</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>h.reject{|k,v| k == "cctv1"}.inspect

</code></pre></div></div>

<h3 id="itor">è¿­ä»£å™¨</h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 <span class="c1">#ä¾‹å¦‚uptoï¼šä»1åˆ°5</span>
<span class="mi">1</span><span class="p">.</span><span class="nf">upto</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">{</span><span class="nb">puts</span> <span class="s2">"upto"</span><span class="p">}</span>

 <span class="c1">#downto:ä»10é€’å‡åˆ°5</span>
<span class="mi">10</span><span class="p">.</span><span class="nf">downto</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">{</span><span class="nb">puts</span> <span class="s2">"downto"</span><span class="p">}</span>

 <span class="c1">#ä»0å¼€å§‹ï¼Œåˆ°50ï¼Œæ¯æ¬¡æ­¥è¿›5</span>
<span class="mi">0</span><span class="p">.</span><span class="nf">step</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span> <span class="k">do</span>
  <span class="nb">puts</span> <span class="s2">"step"</span>
<span class="k">end</span>

 <span class="c1">#å¦‚æœè¦æ‰“å°å‡ºå¾ªç¯çš„indexï¼Œæ€ä¹ˆåŠï¼Ÿ</span>

 <span class="c1">#ä½¿ç”¨block</span>
<span class="mi">1</span><span class="p">.</span><span class="nf">upto</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">i</span><span class="p">}</span>

 <span class="c1">#ä½¿ç”¨do-end</span>
<span class="mi">10</span><span class="p">.</span><span class="nf">downto</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="n">i</span>
<span class="k">end</span>

</code></pre></div></div>

<h3 id="block">Block</h3>

<ul>
  <li>block:æ˜¯åŒ¿åå‡½æ•°ï¼Œå¯ä»¥å½“å‚æ•°ä¼ é€’,å½“å‚æ•°æ—¶éœ€è¦ç”¨&amp;ç¬¦å·å£°æ˜å‚æ•°æ˜¯blockç±»å‹</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">say_hello</span><span class="p">(</span><span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"Hello world"</span>
  <span class="k">if</span> <span class="nb">block_given?</span>
    <span class="n">block</span><span class="p">.</span><span class="nf">call</span>
  <span class="k">else</span>
    <span class="nb">puts</span> <span class="s2">"no block given"</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">say_hello</span> <span class="p">{</span><span class="nb">puts</span> <span class="s2">"call from block"</span><span class="p">}</span>

<span class="n">say_hello</span> <span class="k">do</span>
  <span class="nb">puts</span> <span class="s2">"call from block"</span>
<span class="k">end</span>

 <span class="c1">#blockçš„è¿”å›å€¼</span>
<span class="k">def</span> <span class="nf">say_name</span><span class="p">(</span><span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
  <span class="nb">name</span> <span class="o">=</span> <span class="n">block</span><span class="p">.</span><span class="nf">call</span>
  <span class="nb">puts</span> <span class="nb">name</span>
<span class="k">end</span>

<span class="n">say_name</span><span class="p">{</span><span class="s2">"Jayson"</span><span class="p">}</span>


</code></pre></div></div>

<ul>
  <li>yield</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">test_yield</span><span class="p">(</span><span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
  <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">1</span><span class="o">..</span><span class="mi">5</span> <span class="k">do</span>
    <span class="k">yield</span> <span class="n">i</span> <span class="c1">##will call block, pass iâ€˜s copy to the block</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">test_yield</span> <span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="nb">puts</span> <span class="s2">"</span><span class="si">#{</span><span class="n">i</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">"</span><span class="p">}</span> <span class="c1">#2,4,6,8,10</span>

</code></pre></div></div>

<p>class SimpleBenchmarker</p>

<p>def self.go(times, &amp;block)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>puts "----------Benchmarking started------------"
start_time = Time.now
puts "start time : #{start_time}\n\n"
times.times do |t|
  print "."
  block.call
end
print "\n\n"
end_time = Time.now
puts "End Time:\t #{end_time}\n"
puts "----------Benchmarking finished-----------"
puts "Result :\t\t #{end_time - start_time} seconds"
</code></pre></div></div>

<p>end
end</p>

<p>SimpleBenchmarker.go 5  do
	time = rand(0.1..1.0)<br />
	sleep time
end</p>

<h3 id="proc">Proc</h3>

<ul>
  <li>proc :ç”¨æ¥åˆ›å»ºåŒ¿åå‡½æ•° - block</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">proc_b</span> <span class="o">=</span> <span class="no">Proc</span><span class="p">.</span><span class="nf">new</span> <span class="p">{</span><span class="nb">puts</span> <span class="s2">"hello b"</span><span class="p">}</span>
<span class="n">proc_a</span> <span class="o">=</span> <span class="nb">proc</span> <span class="p">{</span><span class="nb">puts</span> <span class="s2">"hello a"</span><span class="p">}</span>
<span class="n">proc_b</span><span class="p">.</span><span class="nf">call</span>
<span class="n">proc_a</span><span class="p">.</span><span class="nf">call</span>

</code></pre></div></div>

<h3 id="lambda">Lambda</h3>

<ul>
  <li>lambda: ä¸€ç§proc</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">my_lambda_1</span> <span class="o">=</span> <span class="nb">lambda</span> <span class="p">{}</span>
<span class="n">my_lambda_2</span> <span class="o">=</span> <span class="o">-&gt;</span> <span class="nb">lambda</span> <span class="p">{}</span>

</code></pre></div></div>

<p>procå’Œlambdaçš„åŒºåˆ«æ˜¯ï¼Œlambdaå¿…é¡»è¦ä¼ å…¥å‚æ•°</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">my_proc</span> <span class="o">=</span> <span class="nb">proc</span> <span class="p">{</span><span class="o">|</span><span class="nb">name</span><span class="o">|</span> <span class="nb">puts</span> <span class="s2">"hello </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">"</span><span class="p">}</span>
<span class="n">my_proc</span><span class="p">.</span><span class="nf">call</span> <span class="p">(</span><span class="s2">"jayson"</span><span class="p">)</span>

<span class="n">my_lambda</span> <span class="o">=</span> <span class="nb">lambda</span> <span class="p">{</span><span class="o">|</span><span class="nb">name</span><span class="o">|</span> <span class="nb">puts</span> <span class="s2">"hello </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">"</span><span class="p">}</span>
<span class="n">my_lambda</span><span class="p">.</span><span class="nf">call</span> <span class="p">(</span><span class="s2">"candy"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">return_from_proc</span>

  <span class="nb">p</span> <span class="o">=</span> <span class="nb">proc</span> <span class="p">{</span><span class="k">return</span> <span class="s2">"return from proc"</span><span class="p">}</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">call</span>
  <span class="k">return</span> <span class="s2">"return from function"</span>
  
<span class="k">end</span>

<span class="k">def</span> <span class="nf">return_from_lambda</span>

  <span class="n">l</span> <span class="o">=</span> <span class="nb">lambda</span> <span class="p">{</span><span class="k">return</span> <span class="s2">"return from lambda"</span><span class="p">}</span>
  <span class="n">l</span><span class="p">.</span><span class="nf">call</span>
  <span class="k">return</span> <span class="s2">"return from function"</span>
<span class="k">end</span>

<span class="nb">puts</span> <span class="n">return_from_proc</span><span class="p">()</span>
<span class="nb">puts</span> <span class="n">return_from_lambda</span><span class="p">()</span>


</code></pre></div></div>

<h3 id="class">Class</h3>

<ul>
  <li>æˆå‘˜å˜é‡ç”¨@å®šä¹‰</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">class</span> <span class="nc">Square</span>
  
  <span class="c1">##é»˜è®¤æ„é€ </span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">side_length</span><span class="p">)</span>
    
    <span class="c1">##å®šä¹‰æˆå‘˜å˜é‡ç”¨@</span>
    <span class="vi">@side_length</span> <span class="o">=</span> <span class="n">side_length</span>
  
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">area</span>
  
    <span class="n">priFunc</span><span class="p">()</span> <span class="c1">##è°ƒç”¨privateæ–¹æ³•</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">pubFunc</span><span class="p">()</span> <span class="c1">##è°ƒç”¨publicæ–¹æ³•</span>
    <span class="vi">@side_length</span> <span class="o">*</span> <span class="vi">@side_length</span>
    
  <span class="k">end</span>
  
<span class="kp">private</span>
  <span class="k">def</span> <span class="nf">priFunc</span><span class="p">()</span>
    <span class="nb">puts</span> <span class="s2">"private func called"</span>
  <span class="k">end</span>

<span class="kp">public</span>
  <span class="k">def</span> <span class="nf">pubFunc</span><span class="p">()</span>
    <span class="nb">puts</span> <span class="s2">"public func called"</span>
  <span class="k">end</span>

<span class="k">end</span>


</code></pre></div></div>

<ul>
  <li>ç»§æ‰¿,ç±»æ–¹æ³•,ç±»æˆå‘˜</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">class</span> <span class="nc">Test</span> <span class="o">&lt;</span> <span class="no">Object</span> <span class="c1">##ç»§æ‰¿ï¼šé»˜è®¤éƒ½æ˜¯ä»objectç»§æ‰¿</span>

  <span class="c1">##å®šä¹‰ç±»æˆå‘˜çš„getteræ–¹æ³•</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">clz_counter</span>
    <span class="vc">@@clz_counter</span> <span class="c1">##è®¡æ•°å™¨</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">initialize</span>
    
    <span class="c1">##ç±»æˆå‘˜</span>
    <span class="k">if</span> <span class="k">defined?</span> <span class="p">(</span><span class="vc">@@clz_counter</span><span class="p">)</span>
      <span class="vc">@@clz_counter</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">else</span>
      <span class="vc">@@clz_counter</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">end</span>
  <span class="k">end</span>
  
  <span class="c1">##ç±»æ–¹æ³•</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">test_method1</span>
    <span class="nb">puts</span> <span class="s2">"test self_method1"</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nc">Test</span><span class="o">.</span><span class="nf">test_method2</span>
    <span class="nb">puts</span> <span class="s2">"test self_method2"</span>
  <span class="k">end</span>

<span class="k">end</span>

</code></pre></div></div>

<ul>
  <li>override</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">class</span> <span class="nc">ParentClz</span>
  
  <span class="c1">#çˆ¶ç±»çš„pFuncæ–¹æ³•è¿”å›a</span>
  <span class="k">def</span> <span class="nf">pFunc</span> <span class="p">(</span><span class="n">a</span><span class="p">)</span>
     <span class="n">a</span>
  <span class="k">end</span>
  
<span class="k">end</span>

<span class="k">class</span> <span class="nc">ChildClz</span> <span class="o">&lt;</span><span class="no">ParentClz</span>
  
  <span class="c1">##é‡å†™pæ–¹æ³•ï¼Œè¿”å›ax</span>
  <span class="k">def</span> <span class="nf">pFunc</span> <span class="p">(</span><span class="n">a</span><span class="p">)</span>
     <span class="n">a</span><span class="p">.</span><span class="nf">to_s</span> <span class="o">+</span> <span class="s2">"x"</span>
  <span class="k">end</span>
  
<span class="k">end</span>

</code></pre></div></div>

<ul>
  <li>ä¿®æ”¹æˆ–å¢åŠ ç°æœ‰ç±»çš„æ–¹æ³•</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">class</span> <span class="nc">ChildClz</span>
  
  <span class="k">def</span> <span class="nf">pFunc</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">a</span><span class="p">.</span><span class="nf">to_s</span><span class="o">+</span><span class="s2">"x"</span><span class="o">+</span><span class="s2">"x"</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">qFunc</span>
    <span class="nb">puts</span> <span class="s2">"this method is added"</span>
  <span class="k">end</span>
  
<span class="k">end</span>


</code></pre></div></div>

<ul>
  <li>attr</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">class</span> <span class="nc">AttrClz</span>
  
  <span class="c1">##è‡ªåŠ¨æ”¯æŒ.é¢„å‘çš„getterå’Œsetter</span>
  <span class="nb">attr_accessor</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:age</span>
  
  <span class="c1">##ç§æœ‰æ–¹æ³•</span>
  <span class="kp">private</span>
  <span class="k">def</span> <span class="nf">private_method</span>
  <span class="k">end</span>
  
  <span class="c1">##å…±æœ‰æ–¹æ³•</span>
  <span class="kp">public</span>
  <span class="k">def</span> <span class="nf">public_method</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">age</span>
    <span class="vi">@age</span>
  <span class="k">end</span>
  
  <span class="c1">##protectæ–¹æ³•</span>
  <span class="kp">protected</span> <span class="ss">:age</span>
  
<span class="k">end</span>

</code></pre></div></div>

<ul>
  <li>å†…éƒ¨ç±»</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">class</span> <span class="nc">InsideClz</span>
  
  <span class="k">def</span> <span class="nc">InsideClz</span><span class="o">.</span><span class="nf">giveMeDrawingClz</span>
    <span class="no">Drawing</span><span class="p">.</span><span class="nf">new</span>
  <span class="k">end</span>
  
  <span class="c1">##å†…éƒ¨ç±»</span>
  <span class="k">class</span> <span class="nc">Drawing</span>
    <span class="k">def</span> <span class="nf">print</span>
      <span class="nb">puts</span> <span class="s2">"this is a print method inside Drawing"</span>
    <span class="k">end</span>
  <span class="k">end</span>
  
<span class="k">end</span>

<span class="n">a</span> <span class="o">=</span> <span class="no">InsideClz</span><span class="p">.</span><span class="nf">new</span>
<span class="no">InsideClz</span><span class="p">.</span><span class="nf">giveMeDrawingClz</span><span class="p">.</span><span class="nf">print</span>

 <span class="c1">##è¿”å›Drawing å¯¹è±¡</span>
<span class="n">a</span> <span class="o">=</span> <span class="no">InsideClz</span><span class="o">::</span><span class="no">Drawing</span><span class="p">.</span><span class="nf">new</span>
<span class="n">a</span><span class="p">.</span><span class="nf">print</span>


</code></pre></div></div>

<h3 id="namespace">å‘½åç©ºé—´</h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">module</span> <span class="nn">NameSpace1</span>

  <span class="k">def</span> <span class="nc">NameSpace1</span><span class="o">.</span><span class="nf">random</span>
    <span class="nb">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
  <span class="k">end</span>

<span class="k">end</span>

<span class="k">module</span> <span class="nn">NameSpace2</span>
  
  <span class="k">def</span> <span class="nc">NameSpace2</span><span class="o">.</span><span class="nf">random</span>
    <span class="nb">rand</span> <span class="p">(</span><span class="mi">10</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="nb">puts</span> <span class="no">NameSpace1</span><span class="p">.</span><span class="nf">random</span>
<span class="nb">puts</span> <span class="no">NameSpace2</span><span class="p">.</span><span class="nf">random</span>

</code></pre></div></div>

<h3 id="module">Module</h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">module</span> <span class="nn">ToolBox</span>
  
  <span class="k">class</span> <span class="nc">Ruler</span>
    <span class="nb">attr_accessor</span> <span class="ss">:length</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">module</span> <span class="nn">Country</span>
    
  <span class="k">class</span> <span class="nc">Ruler</span>
    <span class="nb">attr_accessor</span> <span class="ss">:name</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">a</span> <span class="o">=</span> <span class="no">ToolBox</span><span class="o">::</span><span class="no">Ruler</span><span class="p">.</span><span class="nf">new</span>
<span class="n">a</span><span class="p">.</span><span class="nf">length</span> <span class="o">=</span> <span class="mi">50</span>

<span class="n">b</span> <span class="o">=</span> <span class="no">Country</span><span class="o">::</span><span class="no">Ruler</span><span class="p">.</span><span class="nf">new</span>
<span class="n">b</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s2">"kate"</span>

<span class="nb">puts</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span>

</code></pre></div></div>

<h3 id="Include">include</h3>

<p>åœ¨æŸä¸ªä½œç”¨åŸŸä¸­å¼•å…¥å…¶å®ƒnamespaceä¸­çš„æ–¹æ³•æˆ–è€…ç±»</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">UsefulFeatures</span>
  
  <span class="k">def</span> <span class="nf">class_name</span>
    
    <span class="nb">self</span><span class="p">.</span><span class="nf">class</span><span class="p">.</span><span class="nf">to_s</span>
    
  <span class="k">end</span>
  
<span class="k">end</span>


<span class="k">class</span> <span class="nc">SomeClass</span>
  
  <span class="c1">##åŒ…å«äº†å…¶å®ƒç±»</span>
  <span class="kp">include</span> <span class="no">UsefulFeatures</span>
  
<span class="k">end</span>

<span class="n">x</span> <span class="o">=</span> <span class="no">SomeClass</span><span class="p">.</span><span class="nf">new</span>
<span class="nb">puts</span> <span class="n">x</span><span class="p">.</span><span class="nf">class_name</span>


</code></pre></div></div>

<p>ç³»ç»Ÿå¯¹arrayé»˜è®¤includeçš„ä¸¤ä¸ªç±»ï¼š
Enumerable</p>

<ul>
  <li>eachæ–¹æ³•ï¼š</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nf">each</span><span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">i</span><span class="p">}</span>

</code></pre></div></div>

<p>é™¤äº†eachæ–¹æ³•å¤–ï¼Œè¿˜æä¾›äº†20å¤šä¸ªæœ‰ç”¨çš„æ”¾æ³•:
collect,detect,find,find_all,include?,max,min,select,sort,to_a</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">list</span> <span class="o">=</span> <span class="sx">%w{this is the longest word check}</span>
<span class="nb">puts</span> <span class="n">list</span><span class="p">.</span><span class="nf">inspect</span>

</code></pre></div></div>

<ul>
  <li>collect</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nf">collect</span><span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">i</span><span class="p">.</span><span class="nf">to_s</span><span class="o">+</span><span class="s2">"x"</span><span class="p">}</span>
</code></pre></div></div>
<ul>
  <li>detect</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nf">detect</span><span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">i</span><span class="p">.</span><span class="nf">between?</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)}</span>
<span class="nb">puts</span> <span class="n">a</span> <span class="c1">#2</span>
</code></pre></div></div>

<ul>
  <li>select</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">].</span><span class="nf">select</span><span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">i</span><span class="p">.</span><span class="nf">between?</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)}</span>
<span class="nb">puts</span> <span class="n">a</span>

</code></pre></div></div>

<ul>
  <li>sort</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">].</span><span class="nf">sort</span> <span class="c1">#[1,2,3,4]</span>
</code></pre></div></div>

<ul>
  <li>min/max</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nf">max</span> 
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nf">min</span>
</code></pre></div></div>

<h3 id="exception">å¼‚å¸¸</h3>

<ul>
  <li>begin-rescue</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">begin</span> 
  <span class="nb">puts</span> <span class="mi">10</span><span class="o">/</span><span class="mi">0</span>
<span class="k">rescue</span>
  <span class="nb">puts</span> <span class="s2">"crash"</span>
<span class="k">end</span>

</code></pre></div></div>

<ul>
  <li>catch-throw</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kp">catch</span><span class="p">(</span><span class="ss">:finish</span><span class="p">)</span> <span class="k">do</span>
  <span class="mi">1000</span><span class="p">.</span><span class="nf">times</span> <span class="k">do</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
    <span class="kp">throw</span>  <span class="ss">:finish</span> <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">123</span>
  <span class="k">end</span>
  
  <span class="nb">puts</span> <span class="s2">"the random number is 123"</span>
<span class="k">end</span>

</code></pre></div></div>

<ul>
  <li>rescue-ensure</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 <span class="c1">#ensure : ç±»ä¼¼finallyï¼Œä¿è¯ä¼šæ‰§è¡Œ</span>
 <span class="c1">#rescue : </span>

<span class="k">def</span> <span class="nf">header</span><span class="p">(</span><span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"this is our header"</span>
  <span class="n">block</span><span class="p">.</span><span class="nf">call</span>
  <span class="nb">puts</span> <span class="s2">"this is our footer"</span>
  
<span class="k">rescue</span>
  <span class="nb">puts</span> <span class="s2">"this is where rescue an error"</span>  
<span class="k">ensure</span>
  <span class="nb">puts</span> <span class="s2">"this one is ensure to be called"</span>
<span class="k">end</span>

<span class="n">header</span> <span class="p">{</span><span class="nb">puts</span> <span class="s2">"this block will crash"</span><span class="p">;</span> <span class="k">raise</span> <span class="s2">"this is an error"</span><span class="p">}</span>

</code></pre></div></div>

<h3 id="file">æ–‡ä»¶æ“ä½œ</h3>

<ul>
  <li>åˆ›å»ºæ–‡ä»¶</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 <span class="c1">##å¦‚æœç”¨newæ‰“å¼€æ–‡ä»¶ï¼Œéœ€è¦è°ƒç”¨close</span>
<span class="n">a</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"./input.json"</span><span class="p">,</span><span class="s2">"r"</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">a</span><span class="p">.</span><span class="nf">class</span> <span class="c1">## File</span>

 <span class="c1">##é»˜è®¤ä»¥æ¢è¡Œç¬¦è¿›è¡Œåˆ†å‰²</span>
<span class="n">a</span><span class="p">.</span><span class="nf">each</span><span class="p">{</span><span class="o">|</span><span class="n">line</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">line</span><span class="p">}</span>
<span class="n">a</span><span class="p">.</span><span class="nf">close</span>


<span class="n">a</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"./input.json"</span><span class="p">,</span><span class="s2">"r"</span><span class="p">)</span>
 <span class="c1">##å¦‚æœç”¨å…¶ä»–ç¬¦å·åˆ†å‰²:</span>
<span class="n">a</span><span class="p">.</span><span class="nf">each</span><span class="p">(</span><span class="s1">':'</span><span class="p">){</span><span class="o">|</span><span class="n">line</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">line</span><span class="p">}</span>
<span class="n">a</span><span class="p">.</span><span class="nf">close</span>


<span class="n">a</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"./input.json"</span><span class="p">,</span><span class="s2">"r"</span><span class="p">)</span>
 <span class="c1">##é€ä¸ªå­—èŠ‚è¯»å–I/Oæµ</span>
<span class="n">a</span><span class="p">.</span><span class="nf">each_byte</span><span class="p">{</span><span class="o">|</span><span class="n">byte</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">byte</span><span class="p">}</span>
<span class="n">a</span><span class="p">.</span><span class="nf">close</span>

<span class="n">a</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"./input.json"</span><span class="p">,</span><span class="s2">"r"</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">a</span><span class="p">.</span><span class="nf">readlines</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s2">"--"</span><span class="p">)</span>
<span class="n">a</span><span class="p">.</span><span class="nf">close</span>

</code></pre></div></div>

<ul>
  <li>è¯»æ–‡ä»¶</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 <span class="c1">##æ›´ç®€å•çš„è¯»æ–‡ä»¶çš„æ–¹æ³•,aä¸ºå­—ç¬¦ä¸²</span>
<span class="n">a</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="s2">"./input.json"</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">a</span><span class="p">.</span><span class="nf">class</span> <span class="c1">##string, not File</span>
<span class="nb">puts</span> <span class="n">a</span>

 <span class="c1">##æ–‡ä»¶æŒ‡é’ˆ</span>
<span class="n">f</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s2">"./input.json"</span><span class="p">)</span>
<span class="n">f</span><span class="p">.</span><span class="nf">pos</span> <span class="o">=</span> <span class="mi">8</span> <span class="c1">##ä»ç¬¬8ä¸ªå­—èŠ‚åå¼€å§‹è¯»å–</span>
<span class="nb">puts</span> <span class="n">f</span><span class="p">.</span><span class="nf">gets</span>
<span class="nb">puts</span> <span class="n">f</span><span class="p">.</span><span class="nf">pos</span>


</code></pre></div></div>

<ul>
  <li>å†™æ–‡ä»¶</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 <span class="c1">##åˆ›å»ºæ–‡ä»¶ï¼Œâ€œwâ€ä¸ºåªå†™ï¼Œåˆ›å»ºæ–°æ–‡ä»¶</span>
<span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s2">"text.txt"</span><span class="p">,</span><span class="s2">"w"</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
  <span class="n">f</span><span class="p">.</span><span class="nf">puts</span> <span class="s2">"This is a test</span><span class="se">\n</span><span class="s2">this is another test"</span>
<span class="k">end</span>

 <span class="c1">##åˆ›å»ºæ–‡ä»¶ï¼Œå¯ä»¥æŒç»­å†™å…¥"a",ç”¨æ¥è¾“å‡ºæ—¥å¿—</span>
<span class="n">f</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s2">"logFile.txt"</span><span class="p">,</span><span class="s2">"a"</span><span class="p">)</span>
<span class="n">f</span><span class="p">.</span><span class="nf">puts</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span>
<span class="n">f</span><span class="p">.</span><span class="nf">close</span>

 <span class="c1">##åˆ›å»ºæ–‡ä»¶ï¼Œå¯è¯»å†™"r+"</span>
<span class="n">f</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s2">"text.txt"</span><span class="p">,</span><span class="s2">"r+"</span><span class="p">)</span>
<span class="n">f</span><span class="p">.</span><span class="nf">write</span> <span class="s2">"12345"</span>
<span class="n">f</span><span class="p">.</span><span class="nf">close</span>

<span class="n">f</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s2">"text.txt"</span><span class="p">,</span><span class="s2">"r"</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">f</span><span class="p">.</span><span class="nf">gets</span> <span class="c1">##è¾“å‡ºä¸€è¡Œ</span>
<span class="n">f</span><span class="p">.</span><span class="nf">close</span>

</code></pre></div></div>
<ul>
  <li>åˆ é™¤</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="no">File</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="s2">"file1.txt"</span><span class="p">)</span>

</code></pre></div></div>

<ul>
  <li>é‡å‘½å</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="no">File</span><span class="p">.</span><span class="nf">rename</span><span class="p">(</span><span class="s2">"text.txt"</span><span class="p">,</span><span class="s2">"test.txt"</span><span class="p">)</span>

</code></pre></div></div>

<ul>
  <li>æ–‡ä»¶æ˜¯å¦å­˜åœ¨</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">b</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">exist?</span><span class="p">(</span><span class="s2">"file1.txt"</span><span class="p">)</span>

</code></pre></div></div>

<ul>
  <li>æ–‡ä»¶æ˜¯å¦ç›¸åŒ</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">b</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">identical?</span><span class="p">(</span><span class="s2">"file1.txt"</span><span class="p">,</span><span class="s2">"file2.txt"</span><span class="p">)</span>

</code></pre></div></div>

<ul>
  <li>æ–‡ä»¶æ˜¯å¦è¯»å–åˆ°æœ«å°¾</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">f</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s2">"test.txt"</span><span class="p">,</span><span class="s2">"r"</span><span class="p">)</span>
<span class="n">f</span><span class="p">.</span><span class="nf">each</span><span class="p">{</span> <span class="o">|</span><span class="n">line</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">line</span><span class="p">}</span>
<span class="nb">puts</span> <span class="s2">"end of file"</span> <span class="k">if</span> <span class="n">f</span><span class="p">.</span><span class="nf">eof?</span>
<span class="n">f</span><span class="p">.</span><span class="nf">close</span>

</code></pre></div></div>

<ul>
  <li>æ–‡ä»¶å¤¹è·¯å¾„</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nb">puts</span> <span class="no">Dir</span><span class="p">.</span><span class="nf">exist?</span>
<span class="nb">puts</span> <span class="no">Dir</span><span class="p">.</span><span class="nf">pwd</span>

</code></pre></div></div>

<ul>
  <li>æ”¹å˜å½“å‰ç›®å½•</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="no">Dir</span><span class="p">.</span><span class="nf">chdir</span><span class="p">(</span><span class="s2">"~/ruby/"</span><span class="p">)</span>
<span class="no">Dir</span><span class="p">.</span><span class="nf">chdir</span><span class="p">(</span><span class="s2">"~/rails/"</span><span class="p">)</span>

</code></pre></div></div>

<ul>
  <li>åˆ—å‡ºå½“å‰è·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nb">puts</span> <span class="no">Dir</span><span class="p">.</span><span class="nf">entries</span><span class="p">(</span><span class="s2">"~/ruby/"</span><span class="p">).</span><span class="nf">join</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

</code></pre></div></div>

<ul>
  <li>FileUtil</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nb">require</span> <span class="s1">'fileutils'</span>
<span class="n">here</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">dirname</span><span class="p">(</span><span class="kp">__FILE__</span><span class="p">)</span> <span class="c1">#__FILE__:built-in ruby value : è¡¨ç¤ºå½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•</span>
<span class="nb">puts</span> <span class="n">here</span>
<span class="nb">puts</span> <span class="no">File</span><span class="p">.</span><span class="nf">expand_path</span><span class="p">(</span><span class="n">here</span><span class="p">)</span>

<span class="nb">puts</span> <span class="no">Dir</span><span class="p">.</span><span class="nf">entries</span><span class="p">(</span><span class="n">here</span><span class="p">)</span> <span class="c1">#åˆ—å‡ºhereç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹</span>

 <span class="c1">#fileutilåˆ›å»ºç›®å½•</span>
<span class="no">FileUtils</span><span class="p">.</span><span class="nf">mkdir_p</span><span class="p">(</span><span class="n">here</span><span class="o">+</span><span class="s1">'/stuff'</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">Dir</span><span class="p">.</span><span class="nf">entries</span><span class="p">(</span><span class="n">here</span><span class="p">)</span>

 <span class="c1">#åˆ›å»ºæ–‡ä»¶</span>
<span class="no">FileUtils</span><span class="p">.</span><span class="nf">touch</span><span class="p">(</span><span class="s1">'file1'</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">Dir</span><span class="p">.</span><span class="nf">entries</span><span class="p">(</span><span class="n">here</span><span class="p">)</span>

</code></pre></div></div>

<h3 id="env">ENV</h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nb">puts</span> <span class="no">RUBY_PLATFORM</span> <span class="c1">##universal.x86_64-darwin13</span>

<span class="no">ENV</span><span class="p">.</span><span class="nf">each</span><span class="p">{</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s1">': '</span><span class="p">)}</span>

<span class="nb">puts</span> <span class="no">ARGV</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s1">'-'</span><span class="p">)</span>

</code></pre></div></div>

<h3 id="kernel">Kernel</h3>

<p>kernel:rubyçš„kernelæ˜¯ä¸€ä¸ªå…¬å…±åº“ï¼Œé‡Œé¢å®šä¹‰äº†ä¸€äº›å…¨å±€API</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">puts</span> <span class="s2">"hello world"</span>
</code></pre></div></div>
<p>ç­‰åŒäº:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Kernel</span><span class="p">.</span><span class="nf">puts</span> <span class="s2">"Hello world"</span>
</code></pre></div></div>

<h3 id="object">Object</h3>

<p>Objectï¼šæ‰€æœ‰å…¨å±€å‡½æ•°éƒ½æ˜¯Objectå¯¹è±¡çš„methods</p>

<p>å…¨å±€å‡½æ•°ï¼š</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="n">a</span>
<span class="k">end</span>
</code></pre></div></div>
<p>è°ƒç”¨å…¨å±€å‡½æ•°:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>func(10)
</code></pre></div></div>
<p>ç­‰åŒäºï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Object.func(10)
</code></pre></div></div>

<h3 id="date"> Date </h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>

 <span class="c1">#date</span>
<span class="nb">require</span> <span class="s1">'date'</span>
<span class="nb">require</span> <span class="s1">'time'</span>

 <span class="c1">#æ ¼å¼åŒ–æ—¶é—´ï¼š</span>
<span class="n">date</span> <span class="o">=</span> <span class="no">Date</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">date</span><span class="p">.</span><span class="nf">to_s</span>
<span class="nb">puts</span> <span class="n">date</span><span class="p">.</span><span class="nf">strftime</span><span class="p">(</span><span class="s2">"%m/%d/%Y"</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">date</span><span class="p">.</span><span class="nf">strftime</span><span class="p">(</span><span class="s2">"%b/%d/%Y"</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">date</span><span class="p">.</span><span class="nf">mday</span>
<span class="nb">puts</span> <span class="n">date</span><span class="p">.</span><span class="nf">day</span>
<span class="nb">puts</span> <span class="n">date</span><span class="p">.</span><span class="nf">year</span>
 
 <span class="c1">#date å¯ä»¥è§£æ</span>
<span class="n">date2</span> <span class="o">=</span> <span class="no">Date</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s2">"2014/4/3"</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">date2</span><span class="o">-</span><span class="n">date</span> <span class="c1">#2/1</span>
<span class="nb">puts</span> <span class="p">(</span><span class="n">date2</span><span class="o">-</span><span class="n">date</span><span class="p">).</span><span class="nf">to_i</span>

 <span class="c1">#time</span>
<span class="n">time</span> <span class="o">=</span> <span class="no">Time</span><span class="p">.</span><span class="nf">new</span>
<span class="nb">puts</span> <span class="n">time</span>

</code></pre></div></div>

<h3 id="yaml"> YAML </h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nb">require</span> <span class="s1">'yaml'</span>
<span class="n">array</span> <span class="o">=</span> <span class="sx">%w(dog cat frog)</span>
<span class="nb">puts</span> <span class="n">array</span><span class="p">.</span><span class="nf">to_yaml</span>
<span class="nb">hash</span> <span class="o">=</span> <span class="p">{</span><span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s2">"jayson"</span><span class="p">,</span> <span class="ss">:location</span> <span class="o">=&gt;</span><span class="s2">"TB"</span><span class="p">}</span>
<span class="nb">puts</span> <span class="nb">hash</span><span class="p">[</span><span class="ss">:name</span><span class="p">]</span>
<span class="nb">puts</span> <span class="nb">hash</span><span class="p">.</span><span class="nf">to_yaml</span>

 <span class="c1">#yamlç”¨äºå†™é…ç½®æ–‡ä»¶</span>
<span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s1">'./config.yml'</span><span class="p">,</span><span class="s1">'w+'</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span><span class="n">f</span><span class="o">|</span>
  
  <span class="n">f</span><span class="p">.</span><span class="nf">puts</span> <span class="nb">hash</span><span class="p">.</span><span class="nf">to_yaml</span>
  
<span class="p">}</span>

<span class="n">config</span> <span class="o">=</span> <span class="no">YAML</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="no">File</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="s1">'./config.yml'</span><span class="p">))</span>
<span class="nb">puts</span> <span class="n">config</span><span class="p">.</span><span class="nf">inspect</span>

<span class="k">class</span> <span class="nc">Frog</span>
  <span class="nb">attr_accessor</span> <span class="ss">:name</span>
<span class="k">end</span>

<span class="n">frog</span> <span class="o">=</span> <span class="no">Frog</span><span class="p">.</span><span class="nf">new</span>
<span class="n">frog</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s2">"jayson"</span>
<span class="n">yaml</span> <span class="o">=</span> <span class="n">frog</span><span class="p">.</span><span class="nf">to_yaml</span>
<span class="nb">puts</span> <span class="n">yaml</span><span class="p">.</span><span class="nf">inspect</span>

<span class="n">same_frog</span> <span class="o">=</span> <span class="no">YAML</span><span class="o">::</span><span class="nb">load</span><span class="p">(</span><span class="n">yaml</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">same_frog</span><span class="p">.</span><span class="nf">inspect</span>


</code></pre></div></div>

<h3 id="erb"> ERB </h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nb">require</span> <span class="s1">'erb'</span>

<span class="nb">hash</span> <span class="o">=</span> <span class="p">{</span><span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s2">"jayson"</span><span class="p">,</span> <span class="ss">:location</span> <span class="o">=&gt;</span><span class="s2">"TB"</span><span class="p">}</span>

 <span class="c1">#ä»¥TEMPLATEå¼€å§‹åˆ°TEMPLATEç»“æŸä¹‹é—´çš„è¿™æ®µå­—ç¬¦ä¸²ä¼šè¢«å¤åˆ¶åˆ°templateè¿™ä¸ªå˜é‡ä¸­</span>
 <span class="c1">#rubyä»£ç éœ€è¦åŒ…å«åœ¨&lt;%= ... %&gt;ä¸­æ‰§è¡Œ</span>
 
<span class="n">template</span> <span class="o">=</span> <span class="o">&lt;&lt;-</span><span class="no">TEMPLATE</span><span class="sh">

From the desk of &lt;%= hash[:name] %&gt;
-----------------------------------
Welcome to &lt;%= treehouse[:location] %&gt;.

we hope you enjoy stay.
-----------------------------------

&lt;% hash.keys.each{|k| %&gt;
  key:&lt;%= k %&gt;
&lt;% } %&gt;

</span><span class="no">TEMPLATE</span>

<span class="n">erb</span> <span class="o">=</span> <span class="no">ERB</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">erb</span><span class="p">.</span><span class="nf">result</span>


</code></pre></div></div>
:ET